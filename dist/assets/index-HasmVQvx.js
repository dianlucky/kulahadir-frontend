import{g as R,aK as K,b as N,h as z,r as o,j as e,D as j,T as x,B as v,a0 as I,c as b,i as k,I as H,P as A,m as W,A as q}from"./index-DchbcEn3.js";import{S as E}from"./Select-CTPlfOJ6.js";import{B as p}from"./Badge-B4nuYk5S.js";import{R as G}from"./RingProgress-B4RbQrDq.js";import{I as D}from"./IconUsers-CuibbJQ1.js";import{I as O}from"./IconCalendar-BAhAwLuv.js";import{D as J}from"./DatePicker-Dl3zH5kF.js";import{I as U,a as Y}from"./IconClockUp-BlSmSFoh.js";import{u as V}from"./getLeave-BCqV9u0E.js";import{T as l}from"./Table-BWB5KNAz.js";import{a as $}from"./getCashAdvance-DNIZnnFg.js";import{u as Q}from"./getSchedule-B2Z15plO.js";import{f as X}from"./getAttendance-D0Fw1MBP.js";import{u as Z}from"./getEmployee-CQoOa67X.js";import{I as ee}from"./IconAdjustments-DUYiWz4G.js";import"./Input-CVfrLFOp.js";import"./CheckIcon-njzRFbAo.js";import"./InputBase-CViaEvXX.js";import"./Tooltip-B8dz96_d.js";import"./get-style-object-DUJZA7T_.js";import"./use-dates-state-C-id8Dn8.js";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var se=R("outline","dashboard","IconDashboard",[["path",{d:"M12 13m-2 0a2 2 0 1 0 4 0a2 2 0 1 0 -4 0",key:"svg-0"}],["path",{d:"M13.45 11.55l2.05 -2.05",key:"svg-1"}],["path",{d:"M6.4 20a9 9 0 1 1 11.2 0z",key:"svg-2"}]]);const te=({attendances:a,schedules:s})=>{const{setTitle:d}=K(),r=N(),{creds:i}=z();i||r("/login");const[t,c]=o.useState("Semua"),u=s==null?void 0:s.map(n=>{const h=a==null?void 0:a.find(w=>w.schedule_id===n.id);return{...n,attendance_id:(h==null?void 0:h.id)??null,attendance_status:(h==null?void 0:h.status)??null,attendance:h||null}});console.log(u);const[P,y]=o.useState(0),[S,f]=o.useState(0),[C,g]=o.useState(0);return o.useEffect(()=>{const n=s?s.filter(m=>t=="Semua"?!0:m.employee.account.status==t).length:0,h=s?s.filter(m=>(m.attendance_status==="Working"||m.attendance_status==="Present")&&t==="Semua"?!0:m.employee.account.status==t).length:0,w=s?s.filter(m=>m.attendance_status==="Late"&&t==="Semua"?!0:m.employee.account.status==t).length:0,_=s?s.filter(m=>m.attendance_status==="belum hadir"&&t==="Semua"?!0:m.employee.account.status==t).length:0;y(h*100/n),f(w*100/n),g(_*100/n)},[s]),e.jsxs("section",{className:"bg-white shadow-lg p-6 rounded-lg ",children:[e.jsxs("div",{className:"grid lg:grid-cols-2",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold",children:"Rekap Absensi Karyawan"}),e.jsx("div",{className:"-mt-1 text-xs text-slate-400",children:"Berikut rekap absensi pada hari ini"})]}),e.jsx(E,{className:"mt-2 lg:mt-0 w-full",placeholder:"Pilih status",data:[{label:"Semua",value:"Semua"},{label:"Pegawai tetap",value:"Pegawai tetap"},{label:"Part time",value:"Part time"}],value:t,onChange:c})]}),e.jsxs("div",{className:"grid grid-cols-2",children:[e.jsxs("div",{className:"py-7 text-sm",children:[e.jsxs("div",{className:"ml-3 mb-2",children:[e.jsx(j,{my:10,label:"Status kehadiran",labelPosition:"right"}),e.jsxs("div",{className:"flex",children:[e.jsx(p,{radius:"sm",color:"#8FD14F",size:"md",children:s==null?void 0:s.filter(n=>(n.attendance_status==="Present"||n.attendance_status==="Late")&&(t==="Semua"||n.employee.account.status===t)).length}),e.jsx(x,{fw:600,size:"sm",ml:3,children:"Hadir"})]}),e.jsxs("div",{className:"flex mt-2",children:[e.jsx(p,{radius:"sm",color:"yellow",size:"md",children:s==null?void 0:s.filter(n=>n.attendance_status=="Late"&&(t=="Semua"||n.employee.account.status==t)).length}),e.jsx(x,{fw:600,size:"sm",ml:3,children:"Terlambat"})]}),e.jsxs("div",{className:"flex mt-2",children:[e.jsx(p,{radius:"sm",color:"grey",size:"md",children:s==null?void 0:s.filter(n=>n.attendance_status=="belum hadir"&&t=="Semua"?!0:n.employee.account.status==t).length}),e.jsx(x,{fw:600,size:"sm",ml:3,children:"Belum hadir"})]}),e.jsx(j,{my:10,label:"Pegawai",labelPosition:"right"}),e.jsxs("div",{className:"flex mt-2",children:[e.jsx(p,{radius:"sm",color:"blue",size:"md",children:s==null?void 0:s.filter(n=>n.employee.account.status=="Pegawai tetap").length}),e.jsx(x,{fw:600,size:"sm",ml:3,children:"Pegawai tetap"})]}),e.jsxs("div",{className:"flex mt-2 mb-5",children:[e.jsx(p,{radius:"sm",color:"#9f7aea",size:"md",children:s==null?void 0:s.filter(n=>n.employee.account.status=="Part time").length}),e.jsx(x,{fw:600,size:"sm",ml:3,children:"Part time"})]})]}),e.jsx(v,{justify:"space-between",fullWidth:!0,className:" border-2 shadow-lg",onClick:()=>{d("Absensi"),r("/schedule")},rightSection:e.jsx(I,{size:14}),children:"Lihat Seluruh Jadwal"})]}),e.jsx("div",{className:"m-auto",children:e.jsx(G,{ml:20,size:260,thickness:35,label:e.jsxs(x,{fw:700,size:"30px",ta:"center",children:[s==null?void 0:s.filter(n=>(n.attendance_status==="Present"||n.attendance_status==="Late")&&(t==="Semua"||n.employee.account.status===t)).length,"/",s==null?void 0:s.filter(n=>t=="Semua"?!0:n.employee.account.status==t).length]}),sections:[{value:P,color:"#8FD14F"},{value:S,color:"yellow"},{value:C,color:"grey"}]})})]})]})},B=({employee_total:a,IconProps:s,title:d})=>e.jsxs("div",{className:"my-auto flex-grow",children:[e.jsx("div",{className:"text-sm mb-1",children:d}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(s,{size:25,className:""}),e.jsx("div",{className:"text-xl font-black",children:a})]})]}),ae=({employees:a})=>{const s=N(),{creds:d}=z();return d===null&&s("/login"),e.jsx("div",{className:"rounded-lg flex px-5 h-20 text-white shadow-md bg-slate-500",children:e.jsx(B,{title:"Total Seluruh Pegawai",employee_total:a==null?void 0:a.filter(r=>r.account.level=="Pegawai").length,IconProps:D})})},le=({employees:a})=>{const s=N(),{creds:d}=z();return d===null&&s("/login"),e.jsx("div",{className:"rounded-lg flex px-5 text-white shadow-md bg-purple-500",children:e.jsx(B,{title:"Total Pegawai Part time",employee_total:a==null?void 0:a.filter(r=>r.account.status=="Part time"&&r.account.level=="Pegawai").length,IconProps:D})})},ie=({employees:a})=>e.jsx("div",{className:"rounded-lg flex px-5 h-20 text-white shadow-md bg-blue-500",children:e.jsx(B,{title:"Total Pegawai tetap",employee_total:a==null?void 0:a.filter(s=>s.account.status=="Pegawai tetap"&&s.account.level=="Pegawai").length,IconProps:D})}),ne=({setDate:a})=>{const[s,d]=o.useState(new Date),r=i=>{if(d(i),i){const t=b(i,"yyyy-MM-dd");a(t)}};return e.jsxs("section",{className:"w-full bg-white shadow-lg rounded-xl z-50 relative p-2 px-2 text-slate-700 mb-4 mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs items-center p-2 px-2 -mt-1 -mb-1",children:[e.jsx("div",{children:e.jsx(x,{fw:700,c:"black",children:"Kalender"})}),e.jsx("div",{className:"my-auto text-right mb-1 me-2",children:e.jsx(O,{})})]}),e.jsx(j,{size:"sm"}),e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx(J,{size:"xs",value:s,onChange:r})})]})},re="https://dianlucky.my.id/api",ce=({schedules:a,attendances:s})=>{const d=N(),r=a==null?void 0:a.map(i=>{const t=s==null?void 0:s.find(c=>c.schedule_id===i.id);return{...i,attendance_id:(t==null?void 0:t.id)??null,attendance_status:i.attendance_status??null,attendance:t||null}});return e.jsxs("section",{className:"bg-slate-50 rounded-lg p-4",children:[e.jsxs("div",{className:"flex justify-between text-xs items-center p-2 px-2 -mt-1 -mb-1",children:[e.jsx("div",{children:e.jsx(x,{fw:700,c:"black",children:"Pegawai yang bekerja"})}),e.jsx("div",{className:"my-auto text-right mb-1 me-2",children:e.jsx(D,{})})]}),e.jsx(j,{size:"sm"}),e.jsxs("div",{className:"grid grid-cols-12 w-full gap-2 px-1 mt-2",children:[r&&r.map((i,t)=>{var c;return e.jsx("div",{className:"col-span-6 bg-white rounded-lg shadow-sm",children:e.jsxs("div",{className:"grid grid-cols-12 p-2",children:[e.jsx("div",{className:"col-span-1",children:e.jsx("div",{className:"bg-slate-100 rounded-full p-1 w-[35px] h-[35px] overflow-hidden border-4 border-gray-800 mt-2",children:e.jsx("img",{src:i.employee.profile_pic?`${re}/uploads/employees/${i.employee.profile_pic}`:"/images/profile-default.png",alt:"Foto Profil",className:"w-full h-full object-cover rounded-full"})})}),e.jsx("div",{className:"col-span-1 ml-1",children:e.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),e.jsxs("div",{className:"col-span-10 ml-1",children:[e.jsx("div",{className:"flex justify-end",children:e.jsx(p,{size:"10px",radius:"xs",color:i.attendance_status=="Done"||i.attendance_status=="Present"?"green":i.attendance_status=="Late"?"yellow":"red",children:e.jsx("span",{style:{fontSize:"8px",fontWeight:"bold"},children:i.attendance_status})})}),e.jsx("div",{className:"mb-1",children:e.jsx(x,{fw:600,size:"12px",children:i.employee.name})}),e.jsx("div",{children:e.jsx(j,{})}),e.jsxs("div",{className:"mt-1 flex justify-between",children:[e.jsxs("div",{className:"w-full flex",children:[e.jsx("div",{children:e.jsx(U,{color:"#77B254",size:16})}),e.jsx("div",{className:"ml-2 mt-1",children:e.jsx(x,{size:"11px",fw:600,c:i.attendance_status=="Late"?"yellow":"black",children:i.attendance?b(i.attendance.check_in,"HH:mm",{locale:k}):"--:--"})})]}),e.jsx(j,{orientation:"vertical"}),e.jsxs("div",{className:"w-full flex ml-2",children:[e.jsx("div",{children:e.jsx(Y,{color:"#F72C5B",size:16})}),e.jsx("div",{className:"ml-2 mt-1",children:e.jsx(x,{size:"11px",fw:600,children:(c=i.attendance)!=null&&c.check_out?b(i.attendance.check_out,"HH:mm",{locale:k}):"--:--"})})]})]})]})]})},t)}),r.length==0&&e.jsx("div",{className:" col-span-12 bg-white shadow-sm p-4 rounded-xl",children:e.jsxs("div",{className:"mt-2 px-3 py-2",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(H,{src:"/images/not-found.svg",style:{width:"120px"}})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(x,{fw:700,size:"md",children:"Ups!"})}),e.jsx("div",{className:"flex justify-center -mt-1",children:e.jsx(x,{fw:700,size:"sm",children:"Jadwal masih belum dibuat"})}),e.jsx("div",{className:"flex justify-center -mt-1",children:e.jsx(x,{fw:400,size:"xs",children:"Cek di menu jadwal..."})}),e.jsx("div",{className:"w-40 mx-auto mt-1",children:e.jsx(v,{size:"xs",color:"yellow",fullWidth:!0,onClick:()=>d("/schedule"),children:"Menu jadwal"})})]})})]})]})},de=({status:a})=>{const[s,d]=o.useState([]),{data:r}=V();o.useEffect(()=>{r&&d(r)},[r]);const i=s.filter(t=>{var c,u;return t.status===a&&new Date(t.date).getMonth()===((c=new Date)==null?void 0:c.getMonth())&&new Date(t.date).getFullYear()===((u=new Date)==null?void 0:u.getFullYear())}).map((t,c)=>e.jsxs(l.Tr,{children:[e.jsx(l.Td,{children:c+1}),e.jsx(l.Td,{children:t.employee.name}),e.jsxs(l.Td,{children:[" ",b(new Date(t.date),"EEEE, dd MMMM yyyy",{locale:k})," "]}),e.jsx(l.Td,{children:e.jsx(p,{radius:"sm",color:t.status=="pending"?"grey":t.status=="accepted"?"green":"red",children:t.status})})]},c));return e.jsx(e.Fragment,{children:e.jsx("section",{children:e.jsx("div",{className:"mt-3",children:e.jsxs(l,{striped:!0,highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,className:"text-dark text-xs table-auto max-w-full",children:[e.jsx(l.Thead,{children:e.jsxs(l.Tr,{children:[e.jsx(l.Th,{className:"font-semibold px-2 py-1",children:"No"}),e.jsx(l.Th,{className:"font-semibold px-2 py-1",children:"Nama"}),e.jsx(l.Th,{className:"font-semibold px-2 py-1",children:"Tanggal pengajuan"}),e.jsx(l.Th,{className:"font-semibold px-2 py-1",children:"Status"})]})}),e.jsx(l.Tbody,{children:s&&s.length>0?i:e.jsx(l.Tr,{children:e.jsx(l.Td,{colSpan:6,className:"text-center py-2",children:"Data tidak ditemukan"})})})]})})})})},oe=({status:a})=>{const[s,d]=o.useState([]),{data:r}=$();o.useEffect(()=>{r&&d(r)},[r]);const i=s.filter(t=>{var c,u;return t.status===a&&new Date(t.date).getMonth()===((c=new Date)==null?void 0:c.getMonth())&&new Date(t.date).getFullYear()===((u=new Date)==null?void 0:u.getFullYear())}).map((t,c)=>e.jsxs(l.Tr,{children:[e.jsx(l.Td,{children:c+1}),e.jsx(l.Td,{children:t.employee.name}),e.jsxs(l.Td,{children:["Rp. ",new Intl.NumberFormat("id-ID").format(t.amount)]}),e.jsx(l.Td,{children:e.jsx(p,{radius:"sm",color:t.status=="pending"?"grey":t.status=="accepted"?"green":"red",children:t.status})})]},c));return e.jsx(e.Fragment,{children:e.jsx("section",{children:e.jsx("div",{className:"mt-3",children:e.jsxs(l,{striped:!0,highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,className:"text-dark text-xs table-auto max-w-full",children:[e.jsx(l.Thead,{children:e.jsxs(l.Tr,{children:[e.jsx(l.Th,{className:"font-semibold px-2 py-1",children:"No"}),e.jsx(l.Th,{className:"font-semibold px-2 py-1",children:"Nama"}),e.jsx(l.Th,{className:"font-semibold px-2 py-1",children:"Jumlah kasbon"}),e.jsx(l.Th,{className:"font-semibold px-2 py-1",children:"Status"})]})}),e.jsx(l.Tbody,{children:s&&s.length>0?i:e.jsx(l.Tr,{children:e.jsx(l.Td,{colSpan:6,className:"text-center py-2",children:"Data tidak ditemukan"})})})]})})})})},Ae=()=>{const a=N(),{creds:s}=z();s||a("/login");const[d,r]=o.useState(b(new Date,"yyyy-MM-dd",{locale:k})),[i,t]=o.useState([]),{data:c,refetch:u,isLoading:P}=Q(d);o.useEffect(()=>{t(c||[])},[c,d]);const[y,S]=o.useState([]),{data:f,refetch:C}=X(d);o.useEffect(()=>{S(f||[])},[f,d]),o.useEffect(()=>{C(),u()},[d]);const[g,n]=o.useState([]),{data:h}=Z();o.useEffect(()=>{h&&n(h)},[h]),console.log("Employeeeeeeeessssssss : ",g);const[w,_]=o.useState(!1),[m,M]=o.useState("pending"),[T,F]=o.useState("Izin");return e.jsx("main",{children:e.jsxs("div",{className:"grid lg:grid-cols-12 gap-6",children:[e.jsxs("div",{className:"col-span-5 flex flex-col gap-6",children:[e.jsx("section",{children:e.jsx(te,{attendances:y,schedules:i})}),e.jsxs("section",{className:"bg-white shadow-xl -mt-2 p-6 rounded-lg",children:[e.jsxs(A,{width:250,position:"bottom",withArrow:!0,shadow:"md",opened:w,closeOnClickOutside:!0,children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"font-bold",children:["Data pengajuan ",T]}),e.jsxs("div",{className:"-mt-1 text-xs text-slate-400 flex gap-2",children:["Pengajuan yang"," ",m=="pending"?"Belum disetujui":m=="accepted"?"Sudah disetujui":"Ditolak"]})]}),e.jsx(A.Target,{children:e.jsx(W,{inline:!0,color:"red",size:10,offset:2,children:e.jsx(v,{size:"xs",onClick:()=>_(L=>!L),children:e.jsx(ee,{color:"white"})})})})]}),e.jsx(A.Dropdown,{children:e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(x,{size:"sm",fw:"bolder",children:"Filter"}),e.jsx(j,{className:"mb-2"}),e.jsx(E,{label:"Tipe",size:"xs",value:T,allowDeselect:!1,onChange:F,data:[{label:"Kasbon",value:"Kasbon"},{label:"Izin",value:"Izin"}]}),e.jsx(E,{label:"status",size:"xs",value:m,allowDeselect:!1,onChange:M,data:[{label:"pending",value:"pending"},{label:"accepted",value:"accepted"},{label:"rejected",value:"rejected"}]})]}),e.jsx(j,{})]})})]}),e.jsxs("div",{className:"mt-3",children:[T=="Izin"&&e.jsx(de,{status:m}),T=="Kasbon"&&e.jsx(oe,{status:m})]})]})]}),e.jsxs("div",{className:"col-span-7",children:[e.jsxs("div",{className:"mb-2 bg-white shadow-lg px-6 py-3 rounded-lg flex justify-between items-center",children:[e.jsxs("div",{children:[e.jsxs("h2",{className:"font-bold",children:["Selamat datang, ",s==null?void 0:s.username]}),e.jsx("div",{className:"-mt-1 text-xs text-slate-400 flex gap-2",children:"Aplikasi manajemen absensi kulakita"})]}),e.jsx(v,{leftSection:e.jsx(se,{size:19}),rightSection:e.jsx(I,{size:15}),radius:"xl",color:"yellow",onClick:()=>a("/account"),children:"Data Master"})]}),e.jsxs("section",{className:"bg-white shadow-lg p-6 rounded-lg",children:[e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h2",{className:"font-bold text-sm text-slate-700",children:"Data Karyawan"}),e.jsx("div",{className:"-mt-1 text-xs text-slate-500",children:"Berikut jumlah karyawan yang terdaftar"})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-3 ",children:[e.jsx(ae,{employees:g}),e.jsx(ie,{employees:g}),e.jsx(le,{employees:g})]})]}),e.jsx(j,{my:30})]}),e.jsx("section",{className:"bg-white shadow-lg p-6 rounded-lg mt-2",children:e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx("h2",{className:"font-bold text-sm text-slate-700",children:"Kehadiran karyawan bulan ini"}),e.jsx("div",{className:"-mt-1 text-xs text-slate-500",children:"Berikut kehadiran karyawan bulan ini"})]}),e.jsxs("div",{className:"grid grid-cols-12 gap-2 mb-3",children:[e.jsx("div",{className:"col-span-4",children:e.jsx(ne,{setDate:r})}),e.jsx("div",{className:"col-span-8 mt-2",children:P?e.jsx("div",{className:"mt-30 ml-50",children:e.jsx(q,{color:"yellow",type:"dots"})}):e.jsx(ce,{schedules:i,attendances:y})})]}),e.jsx(v,{fullWidth:!0,className:"mt-5",rightSection:e.jsx(I,{size:15}),onClick:()=>a("/schedule"),justify:"space-between",children:"Atur Jadwal Karyawan"})]})})]})]})})};export{Ae as DashboardAdmin};
