import{b as d,j as s,D as o,a1 as r,T as t,a0 as m,U as N,I as b,h as v,r as x,a2 as w,l as y,a3 as z,a4 as k,c as C,B as h,$ as D,i as _}from"./index-CR13SSJV.js";import{I as j}from"./IconChevronLeft-tQiKy0Uz.js";const A=({notifications:a})=>{const l=d();return s.jsxs(s.Fragment,{children:[a.filter(e=>e.was_read==!1).length!=0&&s.jsxs("div",{className:"mb-2",children:[s.jsx(o,{my:"xs",label:"Belum dibaca",labelPosition:"left"}),a.filter(e=>e.was_read==!1).sort((e,i)=>new Date(i.created_at).getTime()-new Date(e.created_at).getTime()).map((e,i)=>s.jsx("button",{onClick:()=>{l("/notification/detail",{state:{data:e}})},className:"bg-white shadow-md rounded-2xl",style:{marginTop:"4px"},children:s.jsxs("div",{className:"grid grid-cols-12 py-5 px-4",children:[s.jsx("div",{className:"col-span-1",children:s.jsx(r,{size:27})}),s.jsx("div",{className:"col-span-1",children:s.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),s.jsx("div",{className:"col-span-9 mx-auto text-left",children:s.jsx(t,{fw:"bold",size:"14px",lineClamp:2,c:"#222831",children:e.message})}),s.jsx("div",{className:"col-span-1",children:s.jsx(m,{color:"#654433"})})]})},i))]}),a.filter(e=>e.was_read==!0).length!=0&&s.jsxs("div",{className:"mb-2",children:[s.jsx(o,{my:"xs",label:"Sudah dibaca",labelPosition:"left"}),a.filter(e=>e.was_read==!0).map((e,i)=>s.jsx("div",{className:"bg-slate-100 shadow-sm rounded-2xl",style:{marginTop:"4px"},children:s.jsxs("div",{className:"grid grid-cols-12 py-5 px-4",children:[s.jsx("div",{className:"col-span-1",children:s.jsx(r,{size:27,color:"#A6AEBF"})}),s.jsx("div",{className:"col-span-1",children:s.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),s.jsx("div",{className:"col-span-9 mx-auto",children:s.jsx(t,{fw:"bold",size:"14px",lineClamp:2,c:"#A6AEBF",children:e.message})}),s.jsx("div",{className:"col-span-1",children:s.jsx(N,{onClick:()=>{l("/notification/detail",{state:{data:e}})},children:s.jsx(m,{color:"#A6AEBF"})})})]})},i))]}),a.length==0&&s.jsx("div",{className:"p-4 mt-28",children:s.jsxs("div",{className:"mt-2 px-3 py-2",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(b,{src:"/images/not-found.svg",style:{width:"120px"}})}),s.jsx("div",{className:"flex justify-center",children:s.jsx(t,{fw:700,size:"xl",c:"gray",children:"Ups!"})}),s.jsx("div",{className:"flex justify-center -mt-1",children:s.jsx(t,{fw:700,size:"sm",c:"gray",children:"Notifikasi anda kosong"})})]})})]})},E=()=>{const a=d(),{creds:l}=v(),[e,i]=x.useState([]),{data:c}=w(l==null?void 0:l.employee_id);return x.useEffect(()=>{c&&i(c)},[c]),s.jsxs("main",{children:[s.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),s.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10 mb-2",children:s.jsxs("div",{className:"grid grid-cols-12 mb-1",children:[s.jsx("div",{className:"col-span-1",children:s.jsx(j,{onClick:()=>{a(-1)},size:21,className:"font-bold rounded-md"})}),s.jsx("div",{className:"col-span-11 text-center -ml-4 font-semibold text-brown",children:s.jsx("h2",{className:"font-semibold",children:"Notifikasi"})})]})}),s.jsx("section",{className:"mt-2 px-6 mb-20",children:s.jsx(A,{notifications:e})})]})},I=()=>{const a=d(),e=y().state.data,i=z(e.id),c={was_read:!0},f=async()=>{await i.mutateAsync(c,{onSuccess:n=>{console.log("Success:",n),a(-1),close()}})},u=k(),g=async n=>{u.mutateAsync(n,{onSuccess:p=>{console.log("Success Delete:",p),D({message:"Berhasil menghapus notifikasi",color:"green",position:"top-center"}),a(-1),close()}})};return s.jsxs("main",{children:[s.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),s.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10 mb-2",children:s.jsxs("div",{className:"grid grid-cols-12 mb-1",children:[s.jsx("div",{className:"col-span-1",children:s.jsx(j,{onClick:()=>{a(-1)},size:21,className:"font-bold rounded-md"})}),s.jsx("div",{className:"col-span-11 text-center -ml-4 font-semibold text-brown",children:s.jsx("h2",{className:"font-semibold",children:"Detail Notifikasi"})})]})}),s.jsxs("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 mt-2 mb-2",children:[s.jsxs("div",{className:"flex justify-between px-4",children:[s.jsx(t,{size:"md",fw:"bold",truncate:"end",children:e.type}),s.jsx(t,{size:"sm",my:"auto",children:C(e.created_at,"dd MMM yyyy, HH:mm",{locale:_})})]}),s.jsx(o,{}),s.jsx("div",{className:"px-4 mb-5",children:s.jsx(t,{size:"md",children:e.message})}),s.jsxs("div",{className:"flex justify-between gap-2",children:[s.jsx(h,{size:"sm",color:"grey",fullWidth:!0,onClick:()=>g(e.id),children:"Hapus"}),s.jsx(h,{size:"sm",color:"blue",fullWidth:!0,disabled:e.was_read,onClick:()=>f(),children:"Tandai dibaca"})]})]})]})};export{I as DetailNotificationPage,E as NotificationPage};
