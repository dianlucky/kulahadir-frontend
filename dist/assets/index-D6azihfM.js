import{g as O,h as v,b as f,z as V,j as s,aj as k,a0 as _,D as g,aJ as H,a5 as J,T as n,B as x,I as z,c as A,i as P,d as C,e as M,s as S,r as h,$ as D,l as Y}from"./index-DchbcEn3.js";import{u as E}from"./getEmployee-DEddDsHC.js";import{g as Ds}from"./getEmployee-DEddDsHC.js";import{I as U}from"./IconChevronLeft-Ba9bOv7c.js";import{u as F}from"./use-form-Doffpo57.js";import{T as N}from"./TextInput-BWvjh1lz.js";import{S as q}from"./Select-CTPlfOJ6.js";import{N as K}from"./NumberInput-BrCg8o4I.js";import{D as Q}from"./DatePickerInput-BQCf27D-.js";import"./InputBase-CViaEvXX.js";import"./Input-CVfrLFOp.js";import"./CheckIcon-njzRFbAo.js";import"./use-dates-state-C-id8Dn8.js";import"./use-dates-input-CRuWh4sm.js";import"./DatePicker-Dl3zH5kF.js";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var X=O("outline","briefcase","IconBriefcase",[["path",{d:"M3 7m0 2a2 2 0 0 1 2 -2h14a2 2 0 0 1 2 2v9a2 2 0 0 1 -2 2h-14a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M8 7v-2a2 2 0 0 1 2 -2h4a2 2 0 0 1 2 2v2",key:"svg-1"}],["path",{d:"M12 12l0 .01",key:"svg-2"}],["path",{d:"M3 13a20 20 0 0 0 18 0",key:"svg-3"}]]);const Z=({employee:a})=>{const{logout:t}=v(),l=f(),[i,{open:c,close:u}]=V(!1);return s.jsxs("section",{className:"w-full mt-8 px-7 flex flex-col divide-y divide-gray-300",children:[s.jsxs("button",{onClick:()=>l("/profile/biodata",{state:a}),className:"bg-transparent text-left flex w-full items-center py-3 hover:bg-slate-100 ps-2",children:[s.jsx("div",{className:"bg-brown text-white rounded-lg p-2",children:s.jsx(k,{size:25})}),s.jsx("div",{className:"font-semibold px-4 flex-grow text-sm",children:"Data Diri"}),s.jsx(_,{size:25})]}),s.jsx(g,{my:"md"}),s.jsxs("button",{onClick:c,className:"bg-transparent text-left flex w-full items-center py-3 hover:bg-slate-100 ps-2",children:[s.jsx("div",{className:"bg-red-400 text-white rounded-lg p-2",children:s.jsx(H,{size:25})}),s.jsx("div",{className:"font-semibold px-4 flex-grow text-sm",children:"Logout"}),s.jsx(_,{size:25})]}),s.jsx(J,{opened:i,onClose:u,withCloseButton:!1,children:s.jsxs("div",{className:"px-3",children:[s.jsx("div",{className:"text-center",children:s.jsx(n,{fw:500,size:"md",children:"Apakah anda yakin ingin logout?"})}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx(x,{fullWidth:!0,color:"grey",onClick:()=>u(),children:"Tidak"}),s.jsx(x,{fullWidth:!0,color:"blue",onClick:()=>t(),children:"Ya"})]})]})})]})},y="https://dianlucky.my.id/api",ss="/images/profile-default.png",as=({employee:a})=>{const t=f();return s.jsxs("section",{className:"bg-white shadow-md rounded-lg p-3",children:[s.jsxs("div",{className:"grid grid-cols-12  px-4",children:[s.jsx("div",{className:"col-span-3 flex justify-end mr-2 mt-1",children:s.jsx("div",{className:"bg-white-500 rounded-full p-1 w-13 h-13 overflow-hidden",children:s.jsx(z,{src:a!=null&&a.profile_pic?`${y}/uploads/employees/${a==null?void 0:a.profile_pic}`:ss,alt:"Foto Profil",className:"w-full h-full object-cover rounded-full"})})}),s.jsxs("div",{className:"col-span-9",children:[s.jsx("div",{className:"mt-2",children:s.jsx(n,{fw:"bold",size:"md",truncate:"end",children:a==null?void 0:a.name})}),s.jsx("div",{className:"-mt-1",children:s.jsx(n,{size:"sm",children:a==null?void 0:a.account.status})})]})]}),s.jsx("div",{className:"px-3 p-3",children:s.jsx(g,{})}),s.jsxs("div",{className:"grid grid-cols-12 p-2 -mt-2 px-5 gap-1 pl-10",children:[s.jsxs("div",{className:"col-span-6 mt-2",children:[s.jsx(n,{size:"sm",children:"Username:"}),s.jsx(n,{size:"sm",mt:-1,fw:"bold",truncate:"end",children:a==null?void 0:a.account.username})]}),s.jsxs("div",{className:"col-span-6 mt-2",children:[s.jsx(n,{size:"sm",children:"No Whatsapp :"}),s.jsx(n,{size:"sm",mt:-1,fw:"bold",children:a==null?void 0:a.phone})]}),s.jsxs("div",{className:"col-span-6 mt-2",children:[s.jsx(n,{size:"sm",children:"Tanggal lahir :"}),s.jsx(n,{size:"sm",mt:-1,fw:"bold",children:(a==null?void 0:a.birth_date)&&A(a==null?void 0:a.birth_date,"dd MMM yyyy",{locale:P})})]}),s.jsxs("div",{className:"col-span-6 mt-2",children:[s.jsx(n,{size:"sm",children:"Tanggal masuk:"}),s.jsx(n,{size:"sm",mt:-1,fw:"bold",children:(a==null?void 0:a.created_at)&&A(a==null?void 0:a.created_at,"dd MMM yyyy",{locale:P})})]})]}),s.jsx("div",{className:"mt-4 px-4 mb-2",children:s.jsx(x,{color:"yellow",size:"sm",fullWidth:!0,radius:"md",onClick:()=>{t("/profile/edit",{state:{employee:a}})},children:"Edit Biodata"})})]})},ts="https://dianlucky.my.id/api";async function is(a,t){return(await M.patch(`${ts}/accounts/${a}`,t,{headers:{Authorization:`Bearer ${S.getToken()}`}})).data}const es=a=>C({mutationFn:t=>is(a,t)}),ns="https://dianlucky.my.id/api";async function ls(a,t){return(await M.patch(`${ns}/employees/${a}`,t,{headers:{Authorization:`Bearer ${S.getToken()}`,"Content-Type":"multipart/form-data"}})).data}const ds=a=>C({mutationFn:t=>ls(a,t)}),j="/images/profile-default.png",cs="https://dianlucky.my.id/api",rs=({employee:a,RefetchEmployee:t})=>{var I,B;const l=f(),{creds:i}=v(),[c,u]=h.useState(null),[p,b]=h.useState(a!=null&&a.profile_pic?`${cs}/uploads/employees/${a.profile_pic}`:j),$=o=>{var m;const e=((m=o.target.files)==null?void 0:m[0])||null;if(u(e),e){const w=new FileReader;w.onloadend=()=>{b(w.result)},w.readAsDataURL(e)}},T=()=>{u(null),b(j)},d=F({validateInputOnChange:!0,initialValues:{username:((I=a==null?void 0:a.account)==null?void 0:I.username)||"",password:"",status:((B=a==null?void 0:a.account)==null?void 0:B.status)||""},validate:{username:o=>o.length<5?"Minimal 10 karakter":null}}),L=es(a==null?void 0:a.account.id),R=async o=>{o.preventDefault();const e={username:d.values.username,...d.values.password.trim()!==""&&{password:d.values.password},status:d.values.status};console.log("Data yang dikirim :",e),(d.values.password??"").trim()!==""&&(e.password=d.values.password),await L.mutateAsync(e,{onSuccess:m=>{console.log("Success:",m),d.reset(),l(-1),close(),D({message:"Berhasil mengupdate data",color:"green",position:"top-center"}),t()}})},r=F({validateInputOnChange:!0,initialValues:{name:(a==null?void 0:a.name)||"",birth_date:a!=null&&a.birth_date?new Date(a.birth_date):null,phone:(a==null?void 0:a.phone)||"",profile_pic:(a==null?void 0:a.profile_pic)||""},validate:{name:o=>o.length<5?"Minimal 10 karakter":null,phone:o=>o.length<11?"Minimal 11 karakter":null}}),W=ds(a==null?void 0:a.id),G=async o=>{o.preventDefault();const e=new FormData;e.append("name",r.values.name),r.values.birth_date?e.append("birth_date",r.values.birth_date.toISOString()):e.append("birth_date",""),e.append("phone",r.values.phone),c&&e.append("profile_pic",c),await W.mutateAsync(e,{onSuccess:m=>{console.log("Success:",m),r.reset(),l(-1),t(),close(),u(null),b(j),D({message:"Berhasil mengupdate data",color:"green",position:"top-center"})}})};return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"bg-white shadow-sm rounded-lg",children:[s.jsxs("div",{className:"flex justify-between py-2 px-5",children:[s.jsx("div",{children:s.jsx(n,{fw:500,size:"md",children:"Edit akun"})}),s.jsx("div",{children:s.jsx(k,{})})]}),s.jsx("div",{className:"px-5",children:s.jsx(g,{})}),s.jsx("form",{onSubmit:R,children:s.jsxs("div",{className:"px-5 pb-5",children:[s.jsx("div",{children:s.jsx(N,{withAsterisk:!0,label:"username",size:"sm",...d.getInputProps("username")},d.key("username"))}),s.jsx("div",{children:s.jsx(N,{withAsterisk:!0,label:"password",size:"sm",placeholder:"optional",...d.getInputProps("password")},d.key("password"))}),(i==null?void 0:i.level)=="Owner"&&s.jsx("div",{children:s.jsx(q,{withAsterisk:!0,allowDeselect:!1,label:"Status",placeholder:"status",mt:8,data:[{value:"Pegawai tetap",label:"Pegawai tetap"},{value:"Part time",label:"Part time"},{value:"Pengelola Gudang",label:"Pengelola Gudang"},{value:"Pengelola Frozen",label:"Pengelola Frozen"},{value:"Tidak Aktif",label:"Tidak Aktif"}],...d.getInputProps("status")})}),s.jsx("div",{className:"w-full mt-4",children:s.jsx(x,{fullWidth:!0,size:"sm",type:"submit",children:"Simpan perubahan akun"})})]})})]}),s.jsxs("section",{className:"bg-white shadow-sm rounded-lg mt-2 mb-20",children:[s.jsxs("div",{className:"flex justify-between py-2 px-5",children:[s.jsx("div",{children:s.jsx(n,{fw:500,size:"md",children:"Edit biodata"})}),s.jsx("div",{children:s.jsx(k,{})})]}),s.jsx("div",{className:"px-5",children:s.jsx(g,{})}),s.jsx("form",{onSubmit:G,children:s.jsxs("div",{children:[s.jsxs("div",{className:"mt-4 px-5 space-y-40",children:[s.jsx(z,{radius:"md",src:p,alt:"Preview",className:"w-full max-w-sm mx-auto rounded-lg shadow"}),s.jsxs("div",{className:"flex gap-4 justify-center -mt-36",children:[s.jsxs("label",{htmlFor:"file-upload",children:[s.jsx("input",{id:"file-upload",type:"file",accept:"image/*",onChange:$,className:"hidden"}),s.jsx(x,{component:"span",variant:"filled",color:"blue",fullWidth:!0,children:"Upload Foto"})]}),s.jsx(x,{variant:"outline",color:"red",onClick:T,disabled:p===j,fullWidth:!0,children:"Hapus Foto"})]})]}),s.jsxs("div",{className:"px-5 pb-5 mt-5",children:[s.jsx("div",{children:s.jsx(N,{label:"Nama lengkap",size:"sm",...r.getInputProps("name")},r.key("name"))}),s.jsx("div",{children:s.jsx(K,{hideControls:!0,allowNegative:!1,label:"No Whatsapp",size:"sm",...r.getInputProps("phone")},r.key("phone"))}),s.jsx("div",{children:s.jsx(Q,{label:"Tanggal lahir",...r.getInputProps("birth_date")},r.key("birth_date"))}),s.jsx("div",{className:"w-full mt-4",children:s.jsx(x,{fullWidth:!0,size:"sm",type:"submit",children:"Simpan perubahan biodata"})})]})]})})]})]})},os="https://dianlucky.my.id/api",us="/images/profile-default.png",Is=()=>{const{creds:a}=v(),[t,l]=h.useState(),{data:i}=E(a==null?void 0:a.id);return h.useEffect(()=>{i&&l(i)},[i]),console.log("Data pegawai : ",t),s.jsxs("main",{children:[s.jsxs("section",{className:"flex m-3 shadow-md rounded-xl gap-4 justify-center p-4 bg-white mt-15 ",children:[s.jsx("div",{className:"bg-slate-500 rounded-full w-16 h-16 overflow-hidden",children:s.jsx(z,{src:t!=null&&t.profile_pic?`${os}/uploads/employees/${t==null?void 0:t.profile_pic}`:us,alt:"Foto Profil",width:64,height:64,className:"object-cover w-full h-full"})}),s.jsxs("div",{className:"font-bold text-lg mt-2",children:[t==null?void 0:t.name,s.jsxs("div",{className:"text-sm text-gray-600 flex gap-1 items-center",children:[s.jsx(X,{className:"-mt-1",size:20})," ",s.jsx("span",{className:"font-semibold -mt-1",children:t==null?void 0:t.account.status})]})]})]}),s.jsx(Z,{employee:t})]})},Bs=()=>{const{creds:a}=v(),t=f(),[l,i]=h.useState(),{data:c}=E(a==null?void 0:a.id);return h.useEffect(()=>{c&&i(c)},[c]),s.jsxs("main",{children:[s.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),s.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10",children:s.jsxs("div",{className:"grid grid-cols-12",children:[s.jsx("div",{className:"col-span-1",children:s.jsx(U,{onClick:()=>{t(-1)},size:21,className:"font-bold rounded-md"})}),s.jsx("div",{className:"col-span-11 text-center -ml-4 font-semibold text-brown",children:s.jsx("h2",{className:"font-semibold",children:"Biodata"})})]})}),s.jsx("div",{className:"mt-2 mx-6",children:s.jsx(as,{employee:l})})]})},_s=()=>{const a=f(),l=Y().state.employee,[i,c]=h.useState(),{data:u,refetch:p}=E(l.account_id);return h.useEffect(()=>{c(u||void 0)},[u]),s.jsxs("main",{children:[s.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),s.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10",children:s.jsxs("div",{className:"grid grid-cols-12",children:[s.jsx("div",{className:"col-span-1",children:s.jsx(U,{onClick:()=>{a(-1)},size:21,className:"font-bold rounded-md"})}),s.jsx("div",{className:"col-span-11 text-center -ml-4 font-semibold text-brown",children:s.jsx("h2",{className:"font-semibold",children:"Edit Biodata"})})]})}),s.jsx("div",{className:"mt-2 mx-6",children:i&&s.jsx(rs,{employee:i,RefetchEmployee:p})})]})};export{_s as BiodataEditPage,Bs as BiodataPage,as as BiodataSection,rs as FormEditBiodata,Z as ProfileMenu,Is as ProfilePage,Ds as getEmployeeByAccountId,es as useUpdateAccountById,ds as useUpdateEmployeeById,E as usegetEmployeeByAccountId};
