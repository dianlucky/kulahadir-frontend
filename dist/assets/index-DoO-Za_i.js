import{g as P,j as s,D as o,I as k,T as e,B as g,z as C,c as v,i as u,a5 as A,$ as T,r as l}from"./index-DhziyjX6.js";import{I as R}from"./IconUsers-Bk29FYiS.js";import{I as S}from"./IconInfoCircle-1O8h3Su7.js";import{u as B}from"./getSalary-DA2H0T_v.js";import{u as L,a as K,s as W,g as G}from"./deleteSalary-idxa_e4Q.js";import{I as U}from"./IconTrash-B03RvnVl.js";import{u as $}from"./use-form-BmKDidqr.js";import{I as F}from"./IconCalendarCheck-A1rtQBN6.js";import{N as _}from"./NumberInput-Dj--Uqkj.js";import{T as O}from"./Textarea-CKjVOl78.js";import{R as J}from"./RingProgress-BKvzzgoS.js";import{B as M}from"./Badge-BmcT5mAf.js";import{u as H}from"./getSchedule-MAKfxnyw.js";import{u as Y}from"./getAttendance-C_oeT6yV.js";import{C as q}from"./CalendarSection-BJAe55i1.js";import{A as V}from"./AttendanceCard-BzCEbfJ0.js";import{b as Q}from"./getCashAdvance-XJN4PnKS.js";import{u as X}from"./getSchedule-CZdOThQ6.js";import{M as Z}from"./MonthPickerInput-CnbmSOVx.js";import{a as E}from"./addDays-BZLHcBmN.js";import"./InputBase-BWEPP0b6.js";import"./Input-Dm5-gGl7.js";import"./use-dates-state-BgkaIGkW.js";import"./Tooltip-BVzGkhGm.js";import"./get-style-object-DUJZA7T_.js";import"./IconCalendar-CY0wv-Qm.js";import"./DatePicker-CbY-u6CD.js";import"./use-dates-input-D_3xr4Am.js";import"./MonthPicker-CoC0Kwom.js";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ss=P("outline","calendar-week","IconCalendarWeek",[["path",{d:"M4 7a2 2 0 0 1 2 -2h12a2 2 0 0 1 2 2v12a2 2 0 0 1 -2 2h-12a2 2 0 0 1 -2 -2v-12z",key:"svg-0"}],["path",{d:"M16 3v4",key:"svg-1"}],["path",{d:"M8 3v4",key:"svg-2"}],["path",{d:"M4 11h16",key:"svg-3"}],["path",{d:"M7 14h.013",key:"svg-4"}],["path",{d:"M10.01 14h.005",key:"svg-5"}],["path",{d:"M13.01 14h.005",key:"svg-6"}],["path",{d:"M16.015 14h.005",key:"svg-7"}],["path",{d:"M13.015 17h.005",key:"svg-8"}],["path",{d:"M7.01 17h.005",key:"svg-9"}],["path",{d:"M10.01 17h.005",key:"svg-10"}]]);const D="https://dianlucky.my.id/api",es=({employees:a,setSelectedEmployee:i})=>s.jsx(s.Fragment,{children:s.jsxs("section",{className:"bg-white shadow-sm p-4",children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("div",{className:"text-dark font-semibold cursor-pointer text-md",children:"Daftar pegawai"}),s.jsx("div",{children:s.jsx(R,{})})]}),s.jsx(o,{}),s.jsxs("div",{className:"mt-4",children:[a.length!=0&&s.jsxs("div",{children:[s.jsx(o,{label:"Pegawai tetap",labelPosition:"left"})," ",a.filter(t=>t.employee.account.status=="Pegawai tetap").map((t,r)=>s.jsxs("div",{className:"bg-slate-50 shadow-xs grid grid-cols-12 rounded-xl p-3 mb-2",children:[s.jsx("div",{className:"col-span-2 flex justify-center",children:s.jsx(k,{radius:"200",src:t.employee.profile_pic?`${D}/uploads/employees/${t.employee.profile_pic}`:"/images/profile-default.png",style:{width:"35px",height:"35px",objectFit:"cover"}})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),s.jsxs("div",{className:"col-span-7",children:[s.jsx("div",{children:s.jsx(e,{fw:"bold",size:"sm",truncate:"end",children:t.employee.name})}),s.jsx("div",{children:s.jsx(e,{size:"xs",children:t.employee.account.status})})]}),s.jsx("div",{className:"col-span-1"}),s.jsx("div",{className:"col-span-1 flex justify-end",children:s.jsx("div",{children:s.jsx(g,{size:"compact-sm",variant:"subtle",color:"gray",onClick:()=>i(t.employee),children:s.jsx(S,{color:"#4E71FF"})})})})]},r))]}),a.filter(t=>t.employee.account.status=="Part time").length!=0&&s.jsxs("div",{children:[s.jsx(o,{label:"Part time",labelPosition:"left"})," ",a.filter(t=>t.employee.account.status=="Part time").map((t,r)=>s.jsxs("div",{className:"bg-slate-50 shadow-xs grid grid-cols-12 rounded-xl p-3 mb-2",children:[s.jsx("div",{className:"col-span-2 flex justify-center",children:s.jsx(k,{radius:"200",src:t.employee.profile_pic?`${D}/uploads/employees/${t.employee.profile_pic}`:"/images/profile-default.png",style:{width:"35px",height:"35px",objectFit:"cover"}})}),s.jsx("div",{className:"col-span-1 text-center",children:s.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),s.jsxs("div",{className:"col-span-8",children:[s.jsx("div",{children:s.jsx(e,{fw:"bold",size:"sm",truncate:"end",children:t.employee.name})}),s.jsx("div",{children:s.jsx(e,{size:"xs",children:t.employee.account.status})})]}),s.jsx("div",{className:"col-span-1 flex justify-end",children:s.jsx("div",{children:s.jsx(g,{size:"compact-sm",variant:"subtle",color:"gray",onClick:()=>i(t.employee),children:s.jsx(S,{color:"#4E71FF"})})})})]},r))]})]})]})}),as=({salary:a,schedules:i,refetchSalary:t})=>{const[r,{open:x,close:h}]=C(!1),p=L(),d=async c=>{p.mutateAsync(c,{onSuccess:j=>{console.log("Success Delete:",j),T({message:"Berhasil menghapus data gaji pegawai",color:"green",position:"bottom-right"}),t(),h()}})};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"bg-white shadow-sm p-4",children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("div",{className:"text-dark font-semibold cursor-pointer text-sm",children:"Slip gaji pegawai"}),s.jsx("div",{className:"flex justify-between gap-1 -mt-1",children:s.jsx(g,{size:"compact-xs",color:"red",onClick:x,children:s.jsx(U,{size:18})})})]}),s.jsx(o,{}),s.jsxs("div",{className:"text-center mt-2 mb-3",children:[s.jsx("div",{children:s.jsx(e,{fw:"bold",size:"md",children:"ANGKRINGAN KULAKITA"})}),s.jsx("div",{children:s.jsx(e,{size:"10px",children:"Jl. Ahmad Yani, Angsau, Kec. Pelaihari, Kab. Tanah Laut, Kalimantan Selatan 70815"})})]}),s.jsx(o,{}),s.jsxs("div",{className:"px-2 mt-1 mb-2",children:[s.jsxs("div",{className:"grid grid-cols-12",children:[s.jsx("div",{className:"col-span-3",children:s.jsxs(e,{size:"sm",fw:"bold",children:["Nama"," "]})}),s.jsx("div",{className:"col-span-1",children:s.jsx(e,{size:"sm",fw:"bold",children:":"})}),s.jsx("div",{className:"col-span-8 mt-1",children:s.jsx(e,{size:"13px",children:a.employee.name})})]}),s.jsxs("div",{className:"grid grid-cols-12",children:[s.jsx("div",{className:"col-span-3",children:s.jsxs(e,{size:"sm",fw:"bold",children:["Jabatan"," "]})}),s.jsx("div",{className:"col-span-1",children:s.jsx(e,{size:"sm",fw:"bold",children:":"})}),s.jsx("div",{className:"col-span-8 mt-1",children:s.jsx(e,{size:"13px",children:a.employee.account.level})})]}),s.jsxs("div",{className:"grid grid-cols-12",children:[s.jsx("div",{className:"col-span-3",children:s.jsxs(e,{size:"sm",fw:"bold",children:["Status"," "]})}),s.jsx("div",{className:"col-span-1",children:s.jsx(e,{size:"sm",fw:"bold",children:":"})}),s.jsx("div",{className:"col-span-8 mt-1",children:s.jsx(e,{size:"13px",children:a.employee.account.status})})]}),s.jsxs("div",{className:"grid grid-cols-12",children:[s.jsx("div",{className:"col-span-3",children:s.jsxs(e,{size:"sm",fw:"bold",children:["Bulan"," "]})}),s.jsx("div",{className:"col-span-1",children:s.jsx(e,{size:"sm",fw:"bold",children:":"})}),s.jsx("div",{className:"col-span-8 mt-1",children:s.jsx(e,{size:"13px",children:a.date&&v(a.date,"MMMM yyyy",{locale:u})})})]})]}),s.jsx(o,{}),s.jsxs("div",{className:"px-2 mt-1 mb-2",children:[s.jsxs("div",{className:"grid grid-cols-12",children:[s.jsx("div",{className:"col-span-4",children:s.jsxs(e,{size:"sm",fw:"bold",children:["Gaji pokok"," "]})}),s.jsx("div",{className:"col-span-1",children:s.jsx(e,{size:"sm",fw:"bold",children:":"})}),s.jsx("div",{className:"col-span-7 mt-1 text-end",children:s.jsxs(e,{size:"13px",children:["Rp."," ",new Intl.NumberFormat("id-ID").format((i?i==null?void 0:i.filter(c=>c.attendance_status=="Present"||c.attendance_status=="Late").length:0)*4e4)]})})]}),s.jsxs("div",{className:"grid grid-cols-12",children:[s.jsx("div",{className:"col-span-4",children:s.jsxs(e,{size:"sm",fw:"bold",children:["Bonus"," "]})}),s.jsx("div",{className:"col-span-1",children:s.jsx(e,{size:"sm",fw:"bold",children:":"})}),s.jsx("div",{className:"col-span-7 mt-1 text-end",children:s.jsxs(e,{size:"13px",children:["Rp. ",new Intl.NumberFormat("id-ID").format(a.bonus)]})})]}),s.jsxs("div",{className:"grid grid-cols-12",children:[s.jsx("div",{className:"col-span-7",children:s.jsxs(e,{size:"sm",fw:"bold",children:["Total pendapatan :"," "]})}),s.jsx("div",{className:"col-span-5 mt-1 text-end",children:s.jsxs(e,{size:"13px",children:["Rp."," ",new Intl.NumberFormat("id-ID").format((i?i==null?void 0:i.filter(c=>c.attendance_status=="Present"||c.attendance_status=="Late").length:0)*4e4+a.bonus)]})})]}),s.jsxs("div",{className:"grid grid-cols-12 mt-3",children:[s.jsx("div",{className:"col-span-4",children:s.jsxs(e,{size:"sm",fw:"bold",children:["Potongan"," "]})}),s.jsx("div",{className:"col-span-1",children:s.jsx(e,{size:"sm",fw:"bold",children:":"})}),s.jsx("div",{className:"col-span-7 mt-1 text-end",children:s.jsxs(e,{size:"13px",children:["Rp."," ",new Intl.NumberFormat("id-ID").format(a.salary_deduction)]})})]}),s.jsxs("div",{className:"grid grid-cols-12",children:[s.jsx("div",{className:"col-span-4",children:s.jsxs(e,{size:"sm",fw:"bold",children:["Kasbon"," "]})}),s.jsx("div",{className:"col-span-1",children:s.jsx(e,{size:"sm",fw:"bold",children:":"})}),s.jsx("div",{className:"col-span-7 mt-1 text-end",children:s.jsxs(e,{size:"13px",children:["Rp. ",new Intl.NumberFormat("id-ID").format(a.cash_advance)]})})]}),s.jsxs("div",{className:"grid grid-cols-12",children:[s.jsx("div",{className:"col-span-7",children:s.jsxs(e,{size:"sm",fw:"bold",children:["Total potongan :"," "]})}),s.jsx("div",{className:"col-span-5 mt-1 text-end",children:s.jsxs(e,{size:"13px",children:["Rp."," ",new Intl.NumberFormat("id-ID").format(a.salary_deduction-a.cash_advance)]})})]}),s.jsxs("div",{className:"grid grid-cols-12 mt-3 mb-1",children:[s.jsx("div",{className:"col-span-5",children:s.jsxs(e,{size:"sm",fw:"bold",children:["Gaji diterima"," "]})}),s.jsx("div",{className:"col-span-1",children:s.jsx(e,{size:"sm",fw:"bold",children:":"})}),s.jsx("div",{className:"col-span-6 mt-1 text-end",children:s.jsxs(e,{size:"13px",children:["Rp. ",new Intl.NumberFormat("id-ID").format(a.amount)]})})]}),s.jsx(o,{}),s.jsxs("div",{className:"grid grid-cols-12 mt-4 mb-2",children:[s.jsx("div",{className:"col-span-3"}),s.jsxs("div",{className:"col-span-9 text-center",children:[s.jsxs(e,{size:"xs",children:["Tanah Laut,"," ",v(a.created_at,"dd MMMM yyyy",{locale:u})," "]}),s.jsxs(e,{size:"xs",m:6,fs:"italic",children:["Hafiz Anshari"," "]}),s.jsx(e,{size:"xs",children:"(Owner Kulakita)"})]})]})]}),s.jsx(A,{opened:r,onClose:h,withCloseButton:!1,children:s.jsxs("div",{className:"px-1",children:[s.jsxs("div",{className:"text-center",children:[s.jsx(e,{fw:500,size:"md",children:"Apakah anda yakin ingin menghapus data gaji"}),s.jsxs(e,{fw:700,size:"md",c:"red",children:[a.employee.name," ||"," ",v(a.date,"MMMM yyyy",{locale:u})]})]}),s.jsxs("div",{className:"flex gap-2 mt-4",children:[s.jsx(g,{fullWidth:!0,color:"grey",onClick:()=>h(),children:"Tidak"}),s.jsx(g,{fullWidth:!0,color:"blue",onClick:()=>d(a.id),children:"Ya"})]})]})})]})})},is=({month:a,schedules:i,cashAdvances:t,selectedEmployee:r,RefetchSalary:x,salary:h})=>{const[p,{open:d,close:c}]=C(!1),[j,N]=l.useState(0),[f,I]=l.useState(0);l.useEffect(()=>{N(t?t.filter(n=>n.status==="accepted").reduce((n,w)=>n+w.amount,0):0),I((i?i.filter(n=>n.attendance_status=="Present"||n.attendance_status=="Late"||n.attendance_status=="Working"&&n.status=="on").length:0)*4e4)},[t,i]);const m=$({validateInputOnChange:!0,initialValues:{salary_deduction:0,bonus:0,note:""}}),y=K(),b=async n=>{n.preventDefault();const w={bonus:m.values.bonus,salary_deduction:m.values.salary_deduction,cash_advance:j,note:m.values.note,date:a,amount:f+m.values.bonus-m.values.salary_deduction+j,employee_id:r==null?void 0:r.id};await y.mutateAsync(w,{onSuccess:z=>{console.log("Success:",z),m.reset(),T({message:"Berhasil menambahkan slip gaji pegawai",color:"green",position:"bottom-right"}),x(),c()}})};return s.jsx(s.Fragment,{children:s.jsxs("div",{className:"bg-white shadow-sm p-4 mt-2",children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("div",{className:"text-dark font-semibold cursor-pointer text-sm",children:"Detail Kehadiran & kasbon"}),s.jsx("div",{children:s.jsx(F,{size:20})})]}),s.jsx(o,{}),s.jsxs("div",{className:"mt-2 grid grid-cols-12 px-2",children:[s.jsxs("div",{className:"col-span-12",children:[s.jsxs("div",{className:"flex",children:[s.jsx("div",{children:s.jsx(e,{size:"sm",children:"Bulan : "})}),s.jsx("div",{className:"ml-2",children:s.jsx(e,{size:"sm",fw:"bold",children:a&&v(a,"MMMM yyyy",{locale:u})})})]}),s.jsx(o,{})]}),s.jsx("div",{className:"col-span-6 mt-2",children:s.jsxs("div",{children:[s.jsx(e,{size:"sm",children:"Kehadiran :"}),s.jsxs(e,{size:"sm",fw:"bold",mt:-3,children:[i==null?void 0:i.filter(n=>n.attendance_status=="Present"||n.attendance_status=="Late"||n.attendance_status=="Working").length," ","hari"]})]})}),s.jsx("div",{className:"col-span-6 mt-2",children:s.jsxs("div",{children:[s.jsx(e,{size:"sm",children:"Terlambat :"}),s.jsxs(e,{size:"sm",fw:"bold",mt:-3,children:[i==null?void 0:i.filter(n=>n.attendance_status=="Late").length," ","hari"]})]})}),s.jsx("div",{className:"col-span-6 mt-2",children:s.jsxs("div",{children:[s.jsx(e,{size:"sm",children:"Absen :"}),s.jsxs(e,{size:"sm",fw:"bold",mt:-3,children:[i==null?void 0:i.filter(n=>n.attendance_status=="belum hadir").length," ","hari"]})]})}),s.jsx("div",{className:"col-span-6 mt-2",children:s.jsxs("div",{children:[s.jsx(e,{size:"sm",children:"Izin :"}),s.jsxs(e,{size:"sm",fw:"bold",mt:-3,children:[i==null?void 0:i.filter(n=>n.status=="Leave").length," ","hari"]})]})}),s.jsx("div",{className:"col-span-12 mt-2 mb-1",children:s.jsxs("div",{children:[s.jsx(e,{size:"sm",children:"Total kasbon :"}),s.jsxs(e,{size:"sm",fw:"bold",mt:-3,children:["Rp. ",new Intl.NumberFormat("id-ID").format(j)]})]})})]}),s.jsx(o,{}),s.jsx("div",{className:"mt-2",children:s.jsx(g,{onClick:d,fullWidth:!0,disabled:!!h,children:h?"Slip gaji sudah dibuat":"Buat slip gaji"})}),s.jsx(A,{opened:p,onClose:c,withCloseButton:!1,size:"lg",children:s.jsxs("div",{children:[s.jsx("div",{className:"w-full text-center mb-2",children:s.jsx(e,{fw:"bold",size:"md",children:"Terbitkan gaji pegawai"})}),s.jsx(o,{}),s.jsxs("div",{className:"grid grid-cols-12 mt-2 gap-2",children:[s.jsx("div",{className:"col-span-7",children:s.jsxs("div",{className:"bg-white shadow-sm grid grid-cols-12 p-5",children:[s.jsx("div",{className:"col-span-12 -mt-2",children:s.jsxs("div",{className:"flex",children:[s.jsx("div",{children:s.jsx(e,{size:"sm",children:"Nama : "})}),s.jsx("div",{className:"ml-2",children:s.jsx(e,{size:"sm",fw:"bold",children:r==null?void 0:r.name})})]})}),s.jsxs("div",{className:"col-span-12",children:[s.jsxs("div",{className:"flex",children:[s.jsx("div",{children:s.jsx(e,{size:"sm",children:"Bulan : "})}),s.jsx("div",{className:"ml-2",children:s.jsx(e,{size:"sm",fw:"bold",children:v(a||new Date,"MMMM yyyy",{locale:u})})})]}),s.jsx(o,{})]}),s.jsx("div",{className:"col-span-6 mt-2",children:s.jsxs("div",{children:[s.jsx(e,{size:"sm",children:"Kehadiran :"}),s.jsxs(e,{size:"sm",fw:"bold",mt:-3,children:[i==null?void 0:i.filter(n=>n.attendance_status=="Present"||n.attendance_status=="Late"||n.attendance_status=="Working").length," ","hari"]})]})}),s.jsx("div",{className:"col-span-6 mt-2",children:s.jsxs("div",{children:[s.jsx(e,{size:"sm",children:"Terlambat :"}),s.jsxs(e,{size:"sm",fw:"bold",mt:-3,children:[i==null?void 0:i.filter(n=>n.attendance_status=="Late").length," ","hari"]})]})}),s.jsx("div",{className:"col-span-6 mt-2",children:s.jsxs("div",{children:[s.jsx(e,{size:"sm",children:"Absen :"}),s.jsxs(e,{size:"sm",fw:"bold",mt:-3,children:[i==null?void 0:i.filter(n=>n.attendance_status=="belum hadir").length," ","hari"]})]})}),s.jsx("div",{className:"col-span-6 mt-2",children:s.jsxs("div",{children:[s.jsx(e,{size:"sm",children:"Izin :"}),s.jsxs(e,{size:"sm",fw:"bold",mt:-3,children:[i==null?void 0:i.filter(n=>n.status=="Leave").length," ","hari"]})]})}),s.jsx("div",{className:"col-span-6 mt-2 mb-1",children:s.jsxs("div",{children:[s.jsx(e,{size:"sm",children:"Total kasbon :"}),s.jsxs(e,{size:"sm",fw:"bold",mt:-3,children:["Rp."," ",new Intl.NumberFormat("id-ID").format(j)]})]})}),s.jsx("div",{className:"col-span-6 mt-2 mb-1",children:s.jsxs("div",{children:[s.jsx(e,{size:"sm",children:"Total gaji :"}),s.jsxs(e,{size:"sm",fw:"bold",mt:-3,children:["Rp. ",new Intl.NumberFormat("id-ID").format(f)]})]})})]})}),s.jsx("div",{className:"col-span-5",children:s.jsx("form",{onSubmit:b,children:s.jsxs("div",{className:"bg-white shadow-sm p-2",children:[s.jsx("div",{children:s.jsx(_,{label:"Potongan gaji",placeholder:"Tidak wajib diisi",size:"xs",prefix:"Rp.",decimalSeparator:",",allowDecimal:!1,thousandSeparator:".",hideControls:!0,...m.getInputProps("salary_deduction")},m.key("salary_deduction"))}),s.jsx("div",{children:s.jsx(_,{label:"Bonus pegawai",placeholder:"Tidak wajib diisi",size:"xs",prefix:"Rp.",decimalSeparator:",",allowDecimal:!1,thousandSeparator:".",hideControls:!0,...m.getInputProps("bonus")},m.key("bonus"))}),s.jsx("div",{children:s.jsx(O,{size:"xs",radius:"xs",label:"Catatan",placeholder:"Tambahkan catatan untuk pegawai",...m.getInputProps("note")},m.key("note"))}),s.jsx("div",{className:"mt-2",children:s.jsx(e,{size:"10px",c:"red",fs:"italic",className:"text-justify",children:"*Cek kembali data sebelum menerbitkan gaji pegawai, Slip gaji yang telah diterbitkan tidak dapat diedit dan dihapus"})}),s.jsxs("div",{className:"w-full flex gap-1 mt-3",children:[s.jsx(g,{fullWidth:!0,size:"xs",color:"gray",onClick:c,children:"Kembali"}),s.jsx(g,{fullWidth:!0,size:"xs",type:"submit",children:"Terbitkan"})]})]})})})]})]})})]})})},ts=({schedules:a})=>{const[i,t]=l.useState(0),[r,x]=l.useState(0),[h,p]=l.useState(0);return l.useEffect(()=>{const d=a==null?void 0:a.length,c=a==null?void 0:a.filter(f=>f.attendance_status==="Working"||f.attendance_status==="Present").length,j=a==null?void 0:a.filter(f=>f.attendance_status==="Late").length,N=a==null?void 0:a.filter(f=>f.attendance_status==="belum hadir").length;t(c*100/d),x(j*100/d),p(N*100/d)},[a]),s.jsx(s.Fragment,{children:s.jsxs("div",{className:"bg-white shadow-sm p-4",children:[s.jsxs("div",{className:"flex justify-between mb-1",children:[s.jsx("div",{className:"text-dark font-semibold cursor-pointer text-sm",children:"Rekap Kehadiran Bulanan"}),s.jsx("div",{children:s.jsx(F,{size:20})})]}),s.jsx(o,{}),s.jsxs("div",{className:"mt-2 grid grid-cols-12",children:[s.jsx("div",{className:"col-span-7 flex justify-center",children:s.jsx(J,{size:130,thickness:20,label:s.jsxs(e,{fw:700,size:"16px",ta:"center",children:[a.filter(d=>d.attendance_status=="Working"||d.attendance_status=="Present"||d.attendance_status=="Late").length,"/",a.length]}),sections:[{value:i,color:"#8FD14F"},{value:r,color:"yellow"},{value:h,color:"grey"}]})}),s.jsxs("div",{className:"col-span-5 mt-6",children:[s.jsxs("div",{className:"flex",children:[s.jsx(M,{color:"#8FD14F",size:"md",children:a.filter(d=>d.attendance_status=="Present"||d.attendance_status=="Working").length}),s.jsx(e,{fw:"bold",size:"xs",ml:3,children:"Hadir"})]}),s.jsxs("div",{className:"flex mt-2",children:[s.jsx(M,{color:"yellow",size:"md",children:a.filter(d=>d.attendance_status=="Late").length}),s.jsx(e,{fw:"bold",size:"xs",ml:3,children:"Terlambat"})]}),s.jsxs("div",{className:"flex mt-2",children:[s.jsx(M,{color:"grey",size:"md",children:a.filter(d=>d.attendance_status=="belum hadir").length}),s.jsx(e,{fw:"bold",size:"xs",ml:3,children:"Belum hadir"})]})]})]}),s.jsx(o,{})]})})},ns=({selectedEmployee:a,month:i})=>{const[t,r]=l.useState(v(new Date,"yyyy-MM-dd",{locale:u})),[x,h]=l.useState([]),{data:p,refetch:d}=H(v(new Date(t),"yyyy-MM",{locale:u}),a==null?void 0:a.id);l.useEffect(()=>{p&&h(p)},[p,a]);const[c,j]=l.useState(),{data:N,refetch:f}=Y(t,a==null?void 0:a.id);l.useEffect(()=>{j(N||void 0)},[N,a]);const[I,m]=l.useState([]),{data:y}=Q(v(i||new Date,"yyyy-MM",{locale:u}));l.useEffect(()=>{m(y||[])},[y,a,t]);const[b,n]=l.useState(),{data:w,refetch:z}=B(i,a==null?void 0:a.id);return l.useEffect(()=>{n(w||void 0)},[w,a]),console.log("GAJIIIIIIIII :",b),l.useEffect(()=>{d(),f(),z()},[t,a]),s.jsx(s.Fragment,{children:s.jsxs("section",{className:"bg-slate-50 shadow-sm p-4",children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsxs("div",{className:"text-dark font-semibold cursor-pointer text-md",children:["Data kehadiran pegawai ",a==null?void 0:a.name]}),s.jsx("div",{children:s.jsx(ss,{})})]}),s.jsx(o,{}),a&&s.jsxs("div",{className:"grid grid-cols-12 mt-4 gap-2",children:[s.jsxs("div",{className:"col-span-4",children:[s.jsx("div",{className:"",children:s.jsx("div",{className:"flex justify-center w-full",children:s.jsx(q,{setSelectedDate:r,schedules:x})})}),s.jsx("div",{children:s.jsx(V,{attendance:c})})]}),s.jsxs("div",{className:"col-span-4",children:[s.jsx("div",{children:s.jsx(ts,{schedules:x})}),s.jsx("div",{children:s.jsx(is,{salary:b,RefetchSalary:z,selectedEmployee:a,month:i,schedules:x,cashAdvances:I})})]}),s.jsxs("div",{className:"col-span-4",children:[b!=null&&s.jsx(as,{refetchSalary:z,salary:b,schedules:x}),b==null&&s.jsx("div",{className:"bg-white shadow-sm p-4 rounded-xl",children:s.jsxs("div",{className:"mt-2 px-3 py-2 mt-40 mb-70",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(k,{src:"/images/not-found.svg",style:{width:"120px"}})}),s.jsx("div",{className:"flex justify-center",children:s.jsx(e,{fw:700,size:"md",children:"Ups!"})}),s.jsx("div",{className:"flex justify-center -mt-1",children:s.jsx(e,{fw:700,size:"sm",children:"Gaji masih belum diterbitkan"})}),s.jsx("div",{className:"flex justify-center -mt-1",children:s.jsx(e,{fw:400,size:"xs"})})]})})]})]}),!a&&s.jsx("div",{className:"p-4 rounded-xl mt-20 mb-50",children:s.jsxs("div",{className:"mt-2 px-3 py-2",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(k,{src:"/images/not-found.svg",style:{width:"200px"}})}),s.jsx("div",{className:"flex justify-center",children:s.jsx(e,{fw:700,size:"md",children:"Ups!"})}),s.jsx("div",{className:"flex justify-center -mt-1",children:s.jsx(e,{fw:700,size:"sm",children:"Kamu belum memilih pegawai"})}),s.jsx("div",{className:"flex justify-center -mt-1",children:s.jsx(e,{fw:400,size:"xs",children:"Tekan tombol info yang ada di list pegawai"})})]})})]})})};function ls(a){const i=W(a),r=(6-G(i)+7)%7;return E(i,r)}const Rs=()=>{const[a,i]=l.useState(),[t,r]=l.useState(new Date),[x,h]=l.useState();l.useEffect(()=>{if(t){const j=ls(t);h(v(j,"yyyy-MM-dd",{locale:u}))}},[t]);const[p,d]=l.useState([]),{data:c}=X(x);return l.useEffect(()=>{c&&d(c)},[c]),s.jsx("section",{children:s.jsxs("div",{className:"bg-white shadow-lg p-6 rounded-lg",children:[s.jsxs("div",{className:"flex justify-between my-4 px-4",children:[s.jsx("div",{children:s.jsxs(e,{fw:"bolder",size:"xl",c:"#343a40",children:["Gaji pegawai ",t&&v(t,"MMMM yyyy",{locale:u})]})}),s.jsxs("div",{className:"flex",children:[s.jsx(e,{fw:400,size:"sm",children:"Pilih bulan :"}),s.jsx(Z,{mt:-4,ml:5,w:200,size:"xs",value:t,onChange:r})]})]}),s.jsx(o,{}),s.jsxs("div",{className:"grid grid-cols-12 mt-4 gap-3",children:[s.jsx("div",{className:"col-span-3",children:s.jsx(es,{employees:p,setSelectedEmployee:i})}),s.jsx("div",{className:"col-span-9",children:s.jsx(ns,{selectedEmployee:a,month:x})})]})]})})};export{Rs as SalaryPageAdmin};
