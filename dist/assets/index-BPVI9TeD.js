import{b as u,j as s,D as c,I as j,T as l,c as o,i as m,aj as N,B as z,r as f,U as _,l as A}from"./index-DhziyjX6.js";import{u as C}from"./getEmployee-Dgj6vptt.js";import{I as y}from"./IconChevronLeft-C3Qxla_q.js";import{I}from"./IconPlus-CLFgin2F.js";import{u as T}from"./getEmployee-BG0JRtty.js";import{u as D,a as S}from"./deleteAccount-Bj6T3IGZ.js";import{u as F,f as B}from"./createEmployee-DZGM_QWS.js";import{u as k}from"./use-form-BmKDidqr.js";import{T as w}from"./TextInput-C_mclD3l.js";import{S as E}from"./Select-BAmYL70K.js";import{N as $}from"./NumberInput-Dj--Uqkj.js";import{D as L}from"./DatePickerInput-8f7Mxjzt.js";import"./InputBase-BWEPP0b6.js";import"./Input-Dm5-gGl7.js";import"./CheckIcon-P4tLnAac.js";import"./use-dates-state-BgkaIGkW.js";import"./use-dates-input-D_3xr4Am.js";import"./DatePicker-CbY-u6CD.js";const p="/images/profile-default.png",b="https://dianlucky.my.id/api",U=({employees:a})=>{const t=u();return s.jsx(s.Fragment,{children:a&&s.jsxs("div",{className:"mb-30",children:[a.filter(e=>e.account.status=="Pengelola Gudang").length!=0&&s.jsx(c,{my:"xs",label:"Pengelola Gudang",labelPosition:"left"}),a.filter(e=>e.account.status=="Pengelola Gudang").map((e,i)=>s.jsx("section",{onClick:()=>t("/employee-data/detail",{state:{data:e}}),children:s.jsxs("div",{className:"bg-white shadow-md rounded-2xl p-3",style:{marginTop:"5px"},children:[s.jsxs("div",{className:"grid grid-cols-12 pl-2",children:[s.jsx("div",{className:"col-span-1 my-auto",children:s.jsx(j,{radius:"30px",h:28,w:28,src:e.profile_pic?`${b}/uploads/employees/${e.profile_pic}`:p})}),s.jsx("div",{className:"col-span-1",children:s.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),s.jsx("div",{className:"col-span-10 ml-2",children:s.jsx(l,{fw:700,size:"md",mt:-3,children:e.name})})]}),s.jsx("div",{className:"my-1",children:s.jsx(c,{})}),s.jsx("div",{className:"flex justify-between",children:s.jsxs(l,{fw:300,size:"11px",children:["Awal bekerja :"," ",o(e.created_at,"EEEE, dd MMMM yyyy",{locale:m})]})})]})},i)),a.filter(e=>e.account.status=="Pengelola Frozen").length!=0&&s.jsx(c,{my:"xs",label:"Pengelola Frozen",labelPosition:"left"}),a.filter(e=>e.account.status=="Pengelola Frozen").map((e,i)=>s.jsx("section",{onClick:()=>t("/employee-data/detail",{state:{data:e}}),children:s.jsxs("div",{className:"bg-white shadow-md rounded-2xl p-3",style:{marginTop:"5px"},children:[s.jsxs("div",{className:"grid grid-cols-12 pl-2",children:[s.jsx("div",{className:"col-span-1 my-auto",children:s.jsx(j,{radius:"30px",h:28,w:28,src:e.profile_pic?`${b}/uploads/employees/${e.profile_pic}`:p})}),s.jsx("div",{className:"col-span-1",children:s.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),s.jsx("div",{className:"col-span-10 ml-2",children:s.jsx(l,{fw:700,size:"md",mt:-3,children:e.name})})]}),s.jsx("div",{className:"my-1",children:s.jsx(c,{})}),s.jsx("div",{className:"flex justify-between",children:s.jsxs(l,{fw:300,size:"11px",children:["Awal bekerja :"," ",o(e.created_at,"EEEE, dd MMMM yyyy",{locale:m})]})})]})},i)),s.jsx(c,{my:"xs",label:"Pegawai tetap",labelPosition:"left"}),a.filter(e=>e.account.status=="Pegawai tetap").map((e,i)=>s.jsx("section",{onClick:()=>t("/employee-data/detail",{state:{data:e}}),children:s.jsxs("div",{className:"bg-white shadow-md rounded-2xl p-3",style:{marginTop:"5px"},children:[s.jsxs("div",{className:"grid grid-cols-12 pl-2",children:[s.jsx("div",{className:"col-span-1 my-auto",children:s.jsx(j,{radius:"30px",h:28,w:28,src:e.profile_pic?`${b}/uploads/employees/${e.profile_pic}`:p})}),s.jsx("div",{className:"col-span-1",children:s.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),s.jsx("div",{className:"col-span-10 ml-2",children:s.jsx(l,{fw:700,size:"md",mt:-3,children:e.name})})]}),s.jsx("div",{className:"my-1",children:s.jsx(c,{})}),s.jsx("div",{className:"flex justify-between",children:s.jsxs(l,{fw:300,size:"11px",children:["Awal bekerja :"," ",o(e.created_at,"EEEE, dd MMMM yyyy",{locale:m})]})})]})},i)),a.filter(e=>e.account.status=="Part time").length!=0&&s.jsx(c,{my:"xs",label:"Part time",labelPosition:"left"}),a.filter(e=>e.account.status=="Part time").map((e,i)=>s.jsx("section",{onClick:()=>t("/employee-data/detail",{state:{data:e}}),children:s.jsxs("div",{className:"bg-white shadow-md rounded-2xl p-3",style:{marginTop:"5px"},children:[s.jsxs("div",{className:"grid grid-cols-12 pl-2",children:[s.jsx("div",{className:"col-span-1 my-auto",children:s.jsx(j,{radius:"30px",h:26,w:26,src:p})}),s.jsx("div",{className:"col-span-1",children:s.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),s.jsx("div",{className:"col-span-10 ml-2",children:s.jsx(l,{fw:700,size:"md",mt:-3,children:e.name})})]}),s.jsx("div",{className:"my-1",children:s.jsx(c,{})}),s.jsx("div",{className:"flex justify-between",children:s.jsxs(l,{fw:300,size:"11px",children:["Awal bekerja :"," ",o(e.created_at,"EEEE, dd MM yyyy",{locale:m})]})})]})},i)),a.filter(e=>e.account.status=="Tidak Aktif").length!=0&&s.jsx(c,{my:"xs",label:"Tidak Aktif",labelPosition:"left"}),a.filter(e=>e.account.status=="Tidak Aktif").map((e,i)=>s.jsx("section",{onClick:()=>t("/employee-data/detail",{state:{data:e}}),children:s.jsxs("div",{className:"bg-slate-100 shadow-md rounded-2xl p-3",style:{marginTop:"5px"},children:[s.jsxs("div",{className:"grid grid-cols-12 pl-2",children:[s.jsx("div",{className:"col-span-1 my-auto",children:s.jsx(j,{radius:"30px",h:26,w:26,src:p})}),s.jsx("div",{className:"col-span-1",children:s.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),s.jsx("div",{className:"col-span-10 ml-2",children:s.jsx(l,{fw:700,size:"md",mt:-3,children:e.name})})]}),s.jsx("div",{className:"my-1",children:s.jsx(c,{})}),s.jsx("div",{className:"flex justify-between",children:s.jsxs(l,{fw:300,size:"11px",children:["Awal bekerja :"," ",o(e.created_at,"EEEE, dd MM yyyy",{locale:m})]})})]})},i))]})})},G=({employee:a})=>{const t=u();return s.jsxs("section",{className:"bg-white shadow-md rounded-lg p-2 px-5",children:[s.jsxs("div",{className:"flex justify-between mb-1 px-1 mt-1",children:[s.jsx(l,{fw:700,c:"#654433",children:"Biodata"}),s.jsx(N,{size:20})]}),s.jsx(c,{}),s.jsxs("div",{className:"grid grid-cols-12 p-2 -mt-2 px-2 gap-1 pl-3 mt-2 mb-3",children:[s.jsxs("div",{className:"col-span-12",children:[s.jsx(l,{size:"sm",children:"Nama lengkap:"}),s.jsx(l,{size:"sm",mt:-2,fw:"bold",truncate:"end",children:a==null?void 0:a.name})]}),s.jsxs("div",{className:"col-span-6 mt-2",children:[s.jsx(l,{size:"sm",children:"Username:"}),s.jsx(l,{size:"sm",mt:-2,fw:"bold",truncate:"end",children:a==null?void 0:a.account.username})]}),s.jsxs("div",{className:"col-span-6 mt-2",children:[s.jsx(l,{size:"sm",children:"No Whatsapp :"}),s.jsx(l,{size:"sm",mt:-2,fw:"bold",children:a==null?void 0:a.phone})]}),s.jsxs("div",{className:"col-span-6 mt-2",children:[s.jsx(l,{size:"sm",children:"Tanggal lahir :"}),s.jsx(l,{size:"sm",mt:-2,fw:"bold",children:(a==null?void 0:a.birth_date)&&o(a.birth_date,"dd MM yyyy",{locale:m})})]}),s.jsxs("div",{className:"col-span-6 mt-2",children:[s.jsx(l,{size:"sm",children:"Tanggal masuk:"}),s.jsx(l,{size:"sm",mt:-2,fw:"bold",children:(a==null?void 0:a.created_at)&&o(a.created_at,"dd MM yyyy",{locale:m})})]}),s.jsxs("div",{className:"col-span-6 mt-2",children:[s.jsx(l,{size:"sm",children:"Role :"}),s.jsx(l,{size:"sm",mt:-2,fw:"bold",children:a==null?void 0:a.account.level})]}),s.jsxs("div",{className:"col-span-6 mt-2",children:[s.jsx(l,{size:"sm",children:"Status pegawai:"}),s.jsx(l,{size:"sm",mt:-2,fw:"bold",children:a==null?void 0:a.account.status})]})]}),s.jsx("div",{className:"my-1",children:s.jsx(c,{})}),s.jsx("div",{className:"mt-4 mb-2",children:s.jsx(z,{color:"yellow",size:"sm",fullWidth:!0,radius:"sm",onClick:()=>{t("/profile/edit",{state:{employee:a}})},children:"Edit Biodata pegawai"})})]})},O=()=>{const a=u(),t=k({validateInputOnChange:!0,initialValues:{username:"",password:"",level:"",status:""},validate:{username:n=>n.length<5?"Minimal 10 karakter":null,password:n=>n.length<10?"Minimal 10 karakter":null}}),e=D(),i=async n=>{if(n.preventDefault(),t.validate().hasErrors)return;const v={username:t.values.username,password:t.values.password,level:t.values.level,status:t.values.status};try{const r=await e.mutateAsync(v);if(console.log("âœ… Create account success:",r),t.reset(),!r.data.id){console.error("âŒ Account ID tidak ditemukan dalam response:",r);return}await M(r.data.id)}catch(r){console.error("âŒ Create account gagal:",r)}},x=S(),h=async n=>{x.mutateAsync(n,{onSuccess:g=>{console.log("Success Delete:",g),close()}})},d=k({validateInputOnChange:!0,initialValues:{name:"",birth_date:new Date,phone:""},validate:{name:n=>n.length<10?"Minimal 10 karakter":null,birth_date:n=>n instanceof Date&&!isNaN(n.getTime())?null:"Tanggal tidak valid",phone:n=>n.length<11?"Minimal 11 karakter":null}}),P=F(),M=async n=>{if(console.log("ðŸŸ¡ Masuk ke handleCreateEmployee dengan accountId:",n),d.validate().hasErrors){h(n),close();return}const v={name:d.values.name,birth_date:B(d.values.birth_date),phone:String(d.values.phone),account_id:n};await P.mutateAsync(v,{onSuccess:r=>{console.log("âœ… Employee created:",r),d.reset(),a(-1),close()},onError:()=>{console.error("âŒ Gagal membuat employee, menghapus akun..."),h(n)}})};return s.jsxs(s.Fragment,{children:[s.jsxs("section",{className:"bg-white shadow-sm rounded-lg",children:[s.jsxs("div",{className:"flex justify-between py-2 px-5",children:[s.jsx("div",{children:s.jsx(l,{fw:500,size:"md",children:"Form akun"})}),s.jsx("div",{children:s.jsx(N,{})})]}),s.jsx("div",{className:"px-5",children:s.jsx(c,{})}),s.jsx("form",{children:s.jsxs("div",{className:"px-5 pb-5",children:[s.jsx("div",{children:s.jsx(w,{label:"username",size:"sm",...t.getInputProps("username")},t.key("username"))}),s.jsx("div",{children:s.jsx(w,{label:"password",size:"sm",...t.getInputProps("password")},t.key("password"))}),s.jsx("div",{children:s.jsx(E,{withAsterisk:!0,label:"Role",placeholder:"role",data:[{value:"Pegawai",label:"Pegawai"}],...t.getInputProps("level")})}),s.jsx("div",{children:s.jsx(E,{withAsterisk:!0,label:"Status",placeholder:"status",mt:8,data:[{value:"Pegawai tetap",label:"Pegawai tetap"},{value:"Part time",label:"Part time"}],...t.getInputProps("status")})})]})})]}),s.jsxs("section",{className:"bg-white shadow-sm rounded-lg mt-2 mb-20",children:[s.jsxs("div",{className:"flex justify-between py-2 px-5",children:[s.jsx("div",{children:s.jsx(l,{fw:500,size:"md",children:"Form biodata"})}),s.jsx("div",{children:s.jsx(N,{})})]}),s.jsx("div",{className:"px-5",children:s.jsx(c,{})}),s.jsx("form",{onSubmit:i,children:s.jsx("div",{children:s.jsxs("div",{className:"px-5 pb-5 mt-1",children:[s.jsx("div",{children:s.jsx(w,{label:"Nama lengkap",size:"sm",...d.getInputProps("name")},d.key("name"))}),s.jsx("div",{children:s.jsx($,{hideControls:!0,allowNegative:!1,label:"No Whatsapp",size:"sm",...d.getInputProps("phone")},d.key("phone"))}),s.jsx("div",{children:s.jsx(L,{label:"Tanggal lahir",...d.getInputProps("birth_date")},d.key("birth_date"))}),s.jsx("div",{className:"w-full mt-4",children:s.jsx(z,{fullWidth:!0,size:"sm",type:"submit",children:"Simpan pegawai"})})]})})})]})]})},ds=()=>{const a=u(),[t,e]=f.useState([]),{data:i,isLoading:x}=C();return f.useEffect(()=>{i&&e(i)},[i]),s.jsxs("main",{children:[s.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),s.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{children:s.jsx(y,{onClick:()=>{a(-1)},size:21,className:"font-bold rounded-md"})}),s.jsx("div",{className:"font-semibold text-brown",children:s.jsx("h2",{className:"font-semibold",children:"Data pegawai"})}),s.jsx("div",{className:"mr-2",children:s.jsx(_,{onClick:()=>{a("/employee-data/add")},children:s.jsx(I,{size:22})})})]})}),s.jsx("div",{children:s.jsx("div",{className:"mt-2 mx-6",children:!x&&s.jsx(U,{employees:t})})})]})},R="https://dianlucky.my.id/api",rs=()=>{const a=u(),e=A().state.data,[i,x]=f.useState(),{data:h}=T(e.account_id);return f.useEffect(()=>{x(h||void 0)},[h]),s.jsxs("main",{children:[s.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),s.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{children:s.jsx(y,{onClick:()=>{a(-1)},size:21,className:"font-bold rounded-md"})}),s.jsx("div",{className:"font-semibold text-brown",children:s.jsx("h2",{className:"font-semibold",children:"Detail pegawai"})}),s.jsx("div",{})]})}),s.jsx("section",{className:"bg-white shadow-md rounded-xl mx-6 py-5 mt-2",children:s.jsxs("div",{className:"flex justify-center px-2 my-auto -ml-8",children:[s.jsx("div",{className:"",children:s.jsx(j,{radius:"30px",h:40,w:40,src:i!=null&&i.profile_pic?`${R}/uploads/employees/${i.profile_pic}`:"/images/profile-default.png"})}),s.jsxs("div",{className:"ml-3 my-auto",children:[s.jsx(l,{fw:700,size:"md",children:i==null?void 0:i.name}),s.jsx(l,{fw:300,size:"xs",mt:-4,children:i==null?void 0:i.account.status})]})]})}),s.jsx("div",{children:s.jsx("div",{className:"mt-2 mx-6",children:s.jsx(G,{employee:i})})}),";"]})},os=()=>{const a=u();return s.jsxs("main",{children:[s.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),s.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{children:s.jsx(y,{onClick:()=>{a(-1)},size:21,className:"font-bold rounded-md"})}),s.jsx("div",{className:"font-semibold text-brown",children:s.jsx("h2",{className:"font-semibold",children:"Tambah pegawai"})}),s.jsx("div",{})]})}),s.jsx("div",{children:s.jsx("div",{className:"mt-2 mx-6",children:s.jsx(O,{})})})]})};export{G as BiodataCard,os as CreateEmployeeOwnerPage,rs as DetailEmployeeOwnerPage,U as EmployeeList,ds as EmployeeOwnerPage,O as FormAddEmployee};
