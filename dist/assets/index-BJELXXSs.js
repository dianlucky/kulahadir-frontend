import{g as v,b as p,j as e,T as l,c as o,D as t,I as x,U as w,i as m,a8 as y,r,l as N}from"./index-62kOrHCL.js";import{I as g}from"./IconUsers-BSEzDkAQ.js";import{I as b}from"./IconInfoCircle-ur-9g2mf.js";import{I as k,a as z}from"./IconClockUp-OORGfeYc.js";import{I as _,M as I,T as D,a as M,l as A,P as E,m as C}from"./marker-BaX7wSpJ.js";import{I as S}from"./IconCalendar-B9aPoEdi.js";import{D as B}from"./DatePicker-gd_gvPyw.js";import{f as L}from"./getAttendance-CxloHYaj.js";import{I as u}from"./IconChevronLeft-3Kw0OlEi.js";import{B as T}from"./Badge-C41VQzaz.js";import{I as P}from"./IconSquareCheckFilled-CBxfa0Lt.js";import{b as U}from"./getAccount-BxJzYS1d.js";import{u as F}from"./getDailyTaskEmployee-BERthAp2.js";import"./use-dates-state-DKWOd2wD.js";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var H=v("outline","photo","IconPhoto",[["path",{d:"M15 8h.01",key:"svg-0"}],["path",{d:"M3 6a3 3 0 0 1 3 -3h12a3 3 0 0 1 3 3v12a3 3 0 0 1 -3 3h-12a3 3 0 0 1 -3 -3v-12z",key:"svg-1"}],["path",{d:"M3 16l5 -5c.928 -.893 2.072 -.893 3 0l5 5",key:"svg-2"}],["path",{d:"M14 14l1 -1c.928 -.893 2.072 -.893 3 0l3 3",key:"svg-3"}]]);const $="https://dianlucky.my.id/api",R=({attendances:s,date:c})=>{const i=p();return e.jsxs("section",{className:"mx-auto max-w-sm bg-white w-full shadow-lg rounded-xl z-50 relative p-2 px-2 text-slate-700 mb-4 mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs items-center p-2 px-2 -mt-1 -mb-1",children:[e.jsx("div",{children:e.jsxs(l,{fw:700,c:"#654433",children:["Presensi"," ",o(new Date(c||""),"EEEE, dd MMMM yyyy",{locale:m})]})}),e.jsx("div",{className:"my-auto text-right mb-1 me-2",children:e.jsx(g,{})})]}),e.jsx(t,{size:"sm"}),s.length!=0&&s.map((a,n)=>e.jsxs("div",{className:"",children:[e.jsxs("div",{className:"grid grid-cols-12 p-2 mb-2",children:[e.jsx("div",{className:"col-span-2 m-auto",children:e.jsx(x,{radius:"30px",h:45,w:45,src:a.schedule.employee.profile_pic?`${$}/uploads/employees/${a.schedule.employee.profile_pic}`:"/images/profile-default.png"})}),e.jsx("div",{className:"col-span-1",children:e.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),e.jsxs("div",{className:"col-span-9",children:[e.jsxs("div",{className:"flex justify-between pe-2",children:[e.jsx(l,{fw:700,size:"md",truncate:"end",children:a.schedule.employee.name}),e.jsx(w,{size:"xs",onClick:()=>{i("/employee-attendances/detail",{state:{data:a}})},children:e.jsx(b,{color:"#4E71FF"})})]}),e.jsx("div",{className:"my-1",children:e.jsx(t,{})}),e.jsxs("div",{className:"flex justify-between mt-2",children:[e.jsxs("div",{className:"w-full flex",children:[e.jsx("div",{children:e.jsx(k,{color:"#77B254",size:16})}),e.jsx("div",{className:"ml-2",children:e.jsx(l,{size:"xs",fw:"bold",c:a.schedule.attendance_status=="Late"?"yellow":"black",children:a.check_in?o(a.check_in,"HH:mm",{locale:m}):"--:--"})})]}),e.jsx(t,{orientation:"vertical"}),e.jsxs("div",{className:"w-full flex ml-2",children:[e.jsx("div",{children:e.jsx(z,{color:"#F72C5B",size:16})}),e.jsx("div",{className:"ml-2",children:e.jsx(l,{size:"xs",fw:"bold",children:a.check_out?o(a.check_out,"HH:mm",{locale:m}):"--:--"})})]})]})]})]}),e.jsx(t,{})]},n)),s.length==0&&e.jsx("div",{className:"p-4 rounded-xl",children:e.jsxs("div",{className:"mt-2 px-3 py-2",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(x,{src:"/images/not-found.svg",style:{width:"120px"}})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(l,{fw:700,size:"md",children:"Ups!"})}),e.jsx("div",{className:"flex justify-center -mt-1",children:e.jsx(l,{fw:700,size:"sm",children:"Belum ada pegawai yang absen"})}),e.jsx("div",{className:"flex justify-center -mt-1",children:e.jsx(l,{fw:400,size:"xs"})})]})})]})},W=({attendance:s})=>e.jsxs("section",{className:"bg-white shadow-sm rounded-xl p-2",children:[e.jsxs("div",{className:"flex justify-between p-1 px-3",children:[e.jsx("div",{children:e.jsx(l,{fw:700,size:"md",c:"#654433",children:"Absensi"})}),e.jsx("div",{className:"-mt-1",children:e.jsx(T,{radius:"xs",size:"sm",color:s.schedule.attendance_status=="Present"?"green":"yellow",children:s.schedule.attendance_status})})]}),e.jsx(t,{size:"md"}),e.jsxs("div",{className:"grid grid-cols-12 p-3",children:[e.jsxs("div",{className:"col-span-2 text-center my-auto",children:[e.jsx(l,{fw:"bold",size:"35px",children:s.schedule.shift_code}),e.jsx(l,{size:"14px",mt:-2,children:"Malam"})]}),e.jsx("div",{className:"col-span-1",children:e.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),e.jsxs("div",{className:"col-span-9",children:[e.jsxs("div",{children:[e.jsx(l,{size:"sm",children:"Hari & tangal :"}),e.jsx(l,{size:"sm",fw:"bold",mt:-5,children:s.schedule.date&&o(s.schedule.date,"EEEE dd MMMM yyyy",{locale:m})})]}),e.jsx("div",{className:"py-1",children:e.jsx(t,{})}),e.jsxs("div",{className:"flex justify-between mr-5",children:[e.jsxs("div",{children:[e.jsx(l,{size:"sm",children:"Check-in"}),e.jsxs(l,{size:"sm",fw:"bold",mt:-5,children:[s.check_in&&o(s.check_in,"HH:mm",{locale:m})," ","WITA"]})]}),e.jsxs("div",{children:[e.jsx(l,{size:"sm",children:"Check-out"}),e.jsxs(l,{size:"sm",fw:"bold",mt:-5,children:[s.check_out&&o(s.check_out,"HH:mm",{locale:m})," ","WITA"]})]})]})]})]}),e.jsx(t,{}),e.jsxs("div",{className:"flex justify-between px-7 mt-1",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(l,{size:"sm",children:"Jadwal masuk"}),e.jsxs(l,{size:"sm",fw:"bold",mt:-5,children:[s.schedule.start_time," WITA"]})]}),e.jsx("div",{className:"mt-2",children:e.jsx("div",{className:"w-px h-8 bg-gray-300 mx-4"})}),e.jsxs("div",{className:"text-center",children:[e.jsx(l,{size:"sm",children:"Jadwal keluar"}),e.jsxs(l,{size:"sm",fw:"bold",mt:-5,children:[s.schedule.end_time," WITA"]})]})]})]}),G=({attendance:s})=>e.jsxs("section",{className:"bg-white mx-auto max-w-xs w-full shadow-lg rounded-xl z-50 relative p-4 text-slate-700",children:[e.jsxs("div",{className:"flex justify-between text-xs items-center mb-2",children:[e.jsx("span",{className:"text-base font-bold text-brown",children:"Lokasi"}),e.jsx(_,{className:"opacity-80",size:20})]}),e.jsx(t,{size:"xs",className:"mb-2"}),e.jsx("div",{className:"w-full h-64 overflow-hidden rounded-md",children:e.jsxs(I,{center:s.attendance_long&&s.attendance_lat?[parseFloat(s.attendance_lat),parseFloat(s.attendance_long)]:[-3.793295021545682,114.77480115323222],zoom:15,scrollWheelZoom:!1,style:{height:"100%",width:"100%"},children:[e.jsx(D,{attribution:'Â© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}),e.jsx(M,{position:s.attendance_long&&s.attendance_lat?[parseFloat(s.attendance_lat),parseFloat(s.attendance_long)]:[-3.793295021545682,114.77480115323222],icon:new A.Icon({iconUrl:C,iconSize:[32,32],iconAnchor:[16,32],popupAnchor:[0,-32]}),children:e.jsx(E,{children:"Lokasi default. Akan diperbarui jika lokasi user terdeteksi."})})]})})]}),O=({dailyTask:s})=>e.jsxs("section",{className:"bg-white mx-auto max-w-xs w-full shadow-lg rounded-xl z-50 relative p-4",children:[e.jsxs("div",{className:"flex justify-between text-xs items-center mb-2",children:[e.jsx("span",{className:"text-base font-bold text-brown",children:"Tugas harian"}),e.jsx(y,{size:22})]}),e.jsx(t,{size:"xs",className:"mb-2"}),s.length!=0&&s.map((c,i)=>e.jsxs("div",{children:[e.jsxs("div",{className:"grid grid-cols-12 px-1",children:[e.jsx("div",{className:"col-span-1 m-auto",children:e.jsx(l,{fw:700,size:"sm",children:c.task_employee.task.task_code})}),e.jsx("div",{className:"col-span-1 ml-1",children:e.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),e.jsx("div",{className:"col-span-9 ml-1 my-auto",children:e.jsx(l,{size:"12px",lineClamp:2,children:c.task_employee.task.task_name})}),e.jsx("div",{className:"col-span-1 ",children:c.status=="Sudah"&&e.jsx("div",{style:{marginLeft:"-2px"},children:e.jsx(P,{color:"#77B254"})})})]}),e.jsx("div",{className:"mt-2 mb-2",children:e.jsx(t,{})})]},i)),e.jsx("div",{className:"mt-2",children:e.jsx(t,{})})]}),J="https://dianlucky.my.id/api",V="https://raw.githubusercontent.com/mantinedev/mantine/master/.demo/images/bg-9.png",q=({attendance:s})=>e.jsxs("section",{className:"bg-white mx-auto max-w-xs w-full shadow-sm rounded-xl z-50 relative p-4 text-slate-700",children:[e.jsxs("div",{className:"flex justify-between text-xs items-center mb-2",children:[e.jsx(l,{fw:700,c:"#654433",children:"Bukti foto"}),e.jsx(H,{className:"opacity-80",size:20})]}),e.jsx(t,{size:"xs",className:"mb-2"}),e.jsx("div",{className:"mt-2",children:e.jsx(x,{radius:"",h:"full",w:"full",src:s.snapshot?`${J}/uploads/attendances/${s.snapshot}`:V})})]}),K=({setDate:s})=>{const[c,i]=r.useState(new Date),a=n=>{if(i(n),n){const d=o(n,"yyyy-MM-dd");s(d)}};return e.jsxs("section",{className:"mx-auto max-w-sm bg-white w-full shadow-lg rounded-xl z-50 relative p-2 px-2 text-slate-700 mb-4 mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs items-center p-2 px-2 -mt-1 -mb-1",children:[e.jsx("div",{children:e.jsx(l,{fw:700,c:"#654433",children:"Kalender"})}),e.jsx("div",{className:"my-auto text-right mb-1 me-2",children:e.jsx(S,{})})]}),e.jsx(t,{size:"sm"}),e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx(B,{value:c,onChange:a})})]})},me=()=>{const s=p(),[c,i]=r.useState(o(new Date,"yyyy-MM-dd")),[a,n]=r.useState([]),{data:d,isLoading:h}=L(c);return r.useEffect(()=>{d&&n(d)},[d]),console.log("Data Attendances :",a),e.jsxs("main",{children:[e.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),e.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{children:e.jsx(u,{onClick:()=>{s(-1)},size:21,className:"font-bold rounded-md"})}),e.jsx("div",{className:"font-semibold text-brown",children:e.jsx("h2",{className:"font-semibold",children:"Data kehadiran pegawai"})}),e.jsx("div",{})]})}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-2 mx-6",children:e.jsx(K,{setDate:i})}),e.jsx("div",{className:"-mt-2 mx-6 mb-20",children:!h&&e.jsx(R,{attendances:a,date:c})})]})]})},Z="https://dianlucky.my.id/api",xe=()=>{const s=p(),i=N().state.data,[a,n]=r.useState(),{data:d}=U(i.schedule.employee.account_id);r.useEffect(()=>{d&&n(d)},[d]);const[h,f]=r.useState([]),{data:j}=F(o(i.schedule.date,"yyyy-MM-dd",{locale:m}),i.schedule.employee_id);return r.useEffect(()=>{j&&f(j)},[j]),e.jsxs("main",{className:"mb-20",children:[e.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),e.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{children:e.jsx(u,{onClick:()=>{s(-1)},size:21,className:"font-bold rounded-md"})}),e.jsx("div",{className:"font-semibold text-brown",children:e.jsx("h2",{className:"font-semibold",children:"Detail kehadiran pegawai"})}),e.jsx("div",{})]})}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-2 mx-6",children:e.jsx("section",{className:"bg-white shadow-xs rounded-2xl mx-2 py-5 mt-2",children:e.jsxs("div",{className:"flex justify-center px-2",children:[e.jsx("div",{className:"",children:e.jsx(x,{radius:"30px",h:40,w:40,src:i.schedule.employee.profile_pic?`${Z}/uploads/employees/${i.schedule.employee.profile_pic}`:"/images/profile-default.png"})}),e.jsxs("div",{className:"ml-3 my-auto",children:[e.jsx(l,{fw:700,size:"18px",truncate:"end",children:i.schedule.employee.name}),e.jsx(l,{fw:300,size:"xs",mt:-3,children:a==null?void 0:a.status})]})]})})}),e.jsx("div",{className:"mt-2 mx-6",children:e.jsx(G,{attendance:i})}),e.jsx("div",{className:"mt-2 mx-6",children:e.jsx(q,{attendance:i})}),e.jsx("div",{className:"mt-2 mx-9",children:e.jsx(W,{attendance:i})}),e.jsx("div",{className:"mt-2 mx-6",children:e.jsx(O,{dailyTask:h})})]})]})};export{me as AttendancesOwnerPages,K as CalendarSection,W as DetailAttendanceSection,xe as DetailAttendancesOwnerPage,R as EmployeeSection,G as LocationCardSection,q as PhotoSection,O as TaskEmployeeSection};
