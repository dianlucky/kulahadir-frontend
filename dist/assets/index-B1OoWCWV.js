import{r as o,j as e,T as a,D as n,c as x,z as b,I as u,B as j,a5 as D,i as p,$ as k,b as z}from"./index-WTq-jBmO.js";import{I as C}from"./IconCalendar-a5o3o5ow.js";import{D as M}from"./DatePicker-KQw2JWcj.js";import{u as S,a as P}from"./createDailyTaskEmployee-BfI0GAcD.js";import{I as B}from"./IconUsers-v6HwPn2X.js";import{u as I}from"./getSchedule-BVc8bSdL.js";import{I as E}from"./IconChevronLeft-CpJ0R4r6.js";import"./use-dates-state-D9bGxs59.js";const T=({setDate:t})=>{const[i,r]=o.useState(new Date),d=c=>{if(r(c),c){const l=x(c,"yyyy-MM-dd");t(l)}};return e.jsxs("section",{className:"mx-auto max-w-sm bg-white w-full shadow-lg rounded-xl z-50 relative p-2 px-2 text-slate-700 mb-4 mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs items-center p-2 px-2 -mt-1 -mb-1",children:[e.jsx("div",{children:e.jsx(a,{fw:700,c:"#654433",children:"Kalender"})}),e.jsx("div",{className:"my-auto text-right mb-1 me-2",children:e.jsx(C,{})})]}),e.jsx(n,{size:"sm"}),e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx(M,{value:i,onChange:d})})]})},y="https://dianlucky.my.id/api",W=({workingEmployees:t,date:i,RefetchWorkingEmployees:r})=>{const[d,{open:c,close:l}]=b(!1),[h,f]=o.useState(!1),w=S(),g=P(),v=async()=>{f(!0);try{const s=new Date(i??""),m={month:x(s,"MM-yyyy",{locale:p}),make_schedule:!0};await w.mutateAsync(m);const N={month:x(s,"yyyy-MM",{locale:p}),make_task:!0};await g.mutateAsync(N),r(),l()}catch(s){console.error("Error creating schedules or tasks:",s)}finally{k({message:"Berhasil menambahkan jadwal pegawai",color:"green",position:"top-center"}),f(!1)}};return e.jsxs("section",{className:"mx-auto max-w-sm bg-white w-full shadow-lg rounded-xl z-50 relative p-2 px-2 text-slate-700 mb-4 mt-2",children:[e.jsxs("div",{className:"flex justify-between text-xs items-center p-2 px-2 -mt-1 -mb-1",children:[e.jsx("div",{children:e.jsx(a,{fw:700,c:"#654433",children:"Pegawai yang bekerja"})}),e.jsx("div",{className:"my-auto text-right mb-1 me-2",children:e.jsx(B,{})})]}),e.jsx(n,{size:"sm"}),t.length!=0&&e.jsxs("div",{className:"mt-2",children:[e.jsx("div",{className:"mx-4",children:e.jsx(n,{label:"Pegawai tetap",labelPosition:"center",style:{marginBottom:"4px"}})}),t.filter(s=>s.employee.account.status!="Part time").map((s,m)=>e.jsx("button",{className:"w-full",style:{marginTop:"-3px"},children:e.jsx("div",{className:"w-full bg-slate-50 shadow-sm rounded-2xl px-2",children:e.jsxs("div",{className:"grid grid-cols-12 p-2 mb-2",children:[e.jsx("div",{className:"col-span-2 m-auto",children:e.jsx(u,{radius:"30px",h:40,w:40,src:s.employee.profile_pic?`${y}/uploads/employees/${s.employee.profile_pic}`:"/images/profile-default.png"})}),e.jsxs("div",{className:"col-span-9 ml-2",children:[e.jsx("div",{className:"text-start",children:e.jsx(a,{fw:700,size:"md",truncate:"end",children:s.employee.name})}),e.jsx("div",{className:"",children:e.jsx(n,{})}),e.jsx("div",{className:"text-start",children:e.jsx(a,{fw:400,size:"xs",children:s.employee.account.status})})]})]})})},m))]}),t.filter(s=>s.employee.account.status=="Part time").length!=0&&e.jsxs("div",{className:"",children:[e.jsx("div",{className:"mx-4",children:e.jsx(n,{label:"Part time",labelPosition:"center",style:{marginBottom:"4px"}})}),t.filter(s=>s.employee.account.status=="Part time").map((s,m)=>e.jsx("button",{className:"w-full",style:{marginTop:"-3px"},children:e.jsx("div",{className:"w-full bg-slate-50 shadow-sm rounded-2xl px-2",children:e.jsxs("div",{className:"grid grid-cols-12 p-2 mb-2",children:[e.jsx("div",{className:"col-span-2 m-auto",children:e.jsx(u,{radius:"30px",h:40,w:40,src:s.employee.profile_pic?`${y}/uploads/employees/${s.employee.profile_pic}`:"/images/profile-default.png"})}),e.jsxs("div",{className:"col-span-9 ml-2",children:[e.jsx("div",{className:"text-start",children:e.jsx(a,{fw:700,size:"md",truncate:"end",children:s.employee.name})}),e.jsx("div",{className:"",children:e.jsx(n,{})}),e.jsx("div",{className:"text-start",children:e.jsx(a,{fw:400,size:"xs",children:s.employee.account.status})})]})]})})},m))]}),t.length==0&&e.jsxs("div",{className:"p-4 rounded-xl",children:[e.jsxs("div",{className:"mt-2 px-3 py-2",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(u,{src:"/images/not-found.svg",style:{width:"120px"}})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(a,{fw:700,size:"md",children:"Ups!"})}),e.jsx("div",{className:"flex justify-center -mt-1",children:e.jsx(a,{fw:700,size:"sm",children:"Jadwal masih belum dibuat"})}),e.jsx("div",{className:"flex justify-center -mt-1",children:e.jsx(a,{fw:400,size:"xs"})})]}),e.jsx("div",{className:"px-5",children:e.jsx(j,{fullWidth:!0,size:"sm",onClick:c,color:"yellow",children:"Buat jadwal"})})]}),e.jsxs(D,{opened:d,onClose:l,withCloseButton:!1,children:[e.jsxs("div",{className:"text-center my-3",children:[e.jsx(a,{fw:600,size:"sm",children:"Apakah anda yakin ingin membuat jadwal untuk bulan?"}),e.jsxs(a,{fw:700,size:"sm",c:"red",children:['"',i&&x(i,"MMMM yyyy",{locale:p}),'"']})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(j,{color:"grey",c:"white",onClick:l,fullWidth:!0,children:"Kembali"}),e.jsx(j,{fullWidth:!0,loading:h,loaderProps:{type:"dots"},onClick:v,children:"Ya! Buat jadwal!"})]})]})]})},V=()=>{const t=z(),[i,r]=o.useState(x(new Date,"yyyy-MM-dd")),[d,c]=o.useState([]),{data:l,refetch:h}=I(i);return o.useEffect(()=>{l&&c(l)},[l]),e.jsxs("main",{children:[e.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),e.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{children:e.jsx(E,{onClick:()=>{t(-1)},size:21,className:"font-bold rounded-md"})}),e.jsx("div",{className:"font-semibold text-brown -ml-3",children:e.jsx("h2",{className:"font-semibold",children:"Data Jadwal Pegawai"})}),e.jsx("div",{})]})}),e.jsxs("div",{children:[e.jsx("div",{className:"mt-2 mx-6",children:e.jsx(T,{setDate:r})}),e.jsx("div",{className:"-mt-2 mx-6 mb-15",children:e.jsx(W,{workingEmployees:d,date:i,RefetchWorkingEmployees:h})})]})]})};export{T as CalendarSection,W as EmployeeScheduleList,V as ScheduleOwnerPage};
