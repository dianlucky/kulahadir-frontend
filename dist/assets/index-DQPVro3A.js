import{d as bs,aN as Ss,f as Z,u as b,S as R,V as k,j as s,M as z,p as Is,Y as es,aM as ws,Z as N,Q as js,U as Ns,aH as As,A as _s,o as zs,ab as Rs,a as ks,_ as Ls,af as Ms,g as Ps,b as $s,aj as Ds,B as Es,aO as Gs,s as Vs,$ as Fs,aP as Zs,h as Us,I as Ws}from"./index-DhziyjX6.js";import{aQ as ge}from"./index-DhziyjX6.js";import{u as Os}from"./use-form-BmKDidqr.js";import{T as qs}from"./TextInput-C_mclD3l.js";import{I as X}from"./Input-Dm5-gGl7.js";import{I as Qs}from"./InputBase-BWEPP0b6.js";const Ks="https://dianlucky.my.id/api";async function Hs({data:e}){return(await Ss.post(`${Ks}/auth/login`,e)).data}function Js({config:e}={}){return bs({mutationFn:Hs,...e})}var S={root:"m_8d3f4000",icon:"m_8d3afb97",loader:"m_302b9fb1",group:"m_1a0f1b21",groupSection:"m_437b6484"};const B={orientation:"horizontal"},Ys=k((e,{borderWidth:t})=>({group:{"--ai-border-width":Is(t)}})),U=Z((e,t)=>{const a=b("ActionIconGroup",B,e),{className:c,style:r,classNames:o,styles:l,unstyled:n,orientation:v,vars:d,borderWidth:u,variant:g,mod:f,...y}=b("ActionIconGroup",B,e),p=R({name:"ActionIconGroup",props:a,classes:S,className:c,style:r,classNames:o,styles:l,unstyled:n,vars:d,varsResolver:Ys,rootSelector:"group"});return s.jsx(z,{...p("group"),ref:t,variant:g,mod:[{"data-orientation":v},f],role:"group",...y})});U.classes=S;U.displayName="@mantine/core/ActionIconGroup";const ss={},Ts=k((e,{radius:t,color:a,gradient:c,variant:r,autoContrast:o,size:l})=>{const n=e.variantColorResolver({color:a||e.primaryColor,theme:e,gradient:c,variant:r||"filled",autoContrast:o});return{groupSection:{"--section-height":N(l,"section-height"),"--section-padding-x":N(l,"section-padding-x"),"--section-fz":ws(l),"--section-radius":t===void 0?void 0:es(t),"--section-bg":a||r?n.background:void 0,"--section-color":n.color,"--section-bd":a||r?n.border:void 0}}}),W=Z((e,t)=>{const a=b("ActionIconGroupSection",ss,e),{className:c,style:r,classNames:o,styles:l,unstyled:n,vars:v,variant:d,gradient:u,radius:g,autoContrast:f,...y}=b("ActionIconGroupSection",ss,e),p=R({name:"ActionIconGroupSection",props:a,classes:S,className:c,style:r,classNames:o,styles:l,unstyled:n,vars:v,varsResolver:Ts,rootSelector:"groupSection"});return s.jsx(z,{...p("groupSection"),ref:t,variant:d,...y})});W.classes=S;W.displayName="@mantine/core/ActionIconGroupSection";const Xs={},Bs=k((e,{size:t,radius:a,variant:c,gradient:r,color:o,autoContrast:l})=>{const n=e.variantColorResolver({color:o||e.primaryColor,theme:e,gradient:r,variant:c||"filled",autoContrast:l});return{root:{"--ai-size":N(t,"ai-size"),"--ai-radius":a===void 0?void 0:es(a),"--ai-bg":o||c?n.background:void 0,"--ai-hover":o||c?n.hover:void 0,"--ai-hover-color":o||c?n.hoverColor:void 0,"--ai-color":n.color,"--ai-bd":o||c?n.border:void 0}}}),A=js((e,t)=>{const a=b("ActionIcon",Xs,e),{className:c,unstyled:r,variant:o,classNames:l,styles:n,style:v,loading:d,loaderProps:u,size:g,color:f,radius:y,__staticSelector:p,gradient:q,vars:_,children:L,disabled:C,"data-disabled":x,autoContrast:I,mod:M,...P}=a,w=R({name:["ActionIcon",p],props:a,className:c,style:v,classes:S,classNames:l,styles:n,unstyled:r,vars:_,varsResolver:Bs});return s.jsxs(Ns,{...w("root",{active:!C&&!d&&!x}),...P,unstyled:r,variant:o,size:g,disabled:C||d,ref:t,mod:[{loading:d,disabled:C||x},M],children:[s.jsx(As,{mounted:!!d,transition:"slide-down",duration:150,children:$=>s.jsx(z,{component:"span",...w("loader",{style:$}),"aria-hidden":!0,children:s.jsx(_s,{color:"var(--ai-color)",size:"calc(var(--ai-size) * 0.55)",...u})})}),s.jsx(z,{component:"span",mod:{loading:d},...w("icon"),children:L})]})});A.classes=S;A.displayName="@mantine/core/ActionIcon";A.Group=U;A.GroupSection=W;const se=({reveal:e})=>s.jsx("svg",{viewBox:"0 0 15 15",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{width:"var(--psi-icon-size)",height:"var(--psi-icon-size)"},children:s.jsx("path",{d:e?"M13.3536 2.35355C13.5488 2.15829 13.5488 1.84171 13.3536 1.64645C13.1583 1.45118 12.8417 1.45118 12.6464 1.64645L10.6828 3.61012C9.70652 3.21671 8.63759 3 7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C0.902945 9.08812 2.02314 10.1861 3.36061 10.9323L1.64645 12.6464C1.45118 12.8417 1.45118 13.1583 1.64645 13.3536C1.84171 13.5488 2.15829 13.5488 2.35355 13.3536L4.31723 11.3899C5.29348 11.7833 6.36241 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C14.0971 5.9119 12.9769 4.81391 11.6394 4.06771L13.3536 2.35355ZM9.90428 4.38861C9.15332 4.1361 8.34759 4 7.5 4C4.80285 4 2.52952 5.37816 1.09622 7.50001C1.87284 8.6497 2.89609 9.58106 4.09974 10.1931L9.90428 4.38861ZM5.09572 10.6114L10.9003 4.80685C12.1039 5.41894 13.1272 6.35031 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11C6.65241 11 5.84668 10.8639 5.09572 10.6114Z":"M7.5 11C4.80285 11 2.52952 9.62184 1.09622 7.50001C2.52952 5.37816 4.80285 4 7.5 4C10.1971 4 12.4705 5.37816 13.9038 7.50001C12.4705 9.62183 10.1971 11 7.5 11ZM7.5 3C4.30786 3 1.65639 4.70638 0.0760002 7.23501C-0.0253338 7.39715 -0.0253334 7.60288 0.0760014 7.76501C1.65639 10.2936 4.30786 12 7.5 12C10.6921 12 13.3436 10.2936 14.924 7.76501C15.0253 7.60288 15.0253 7.39715 14.924 7.23501C13.3436 4.70638 10.6921 3 7.5 3ZM7.5 9.5C8.60457 9.5 9.5 8.60457 9.5 7.5C9.5 6.39543 8.60457 5.5 7.5 5.5C6.39543 5.5 5.5 6.39543 5.5 7.5C5.5 8.60457 6.39543 9.5 7.5 9.5Z",fill:"currentColor",fillRule:"evenodd",clipRule:"evenodd"})});var F={root:"m_f61ca620",input:"m_ccf8da4c",innerInput:"m_f2d85dd2",visibilityToggle:"m_b1072d44"};const ee={visibilityToggleIcon:se},oe=k((e,{size:t})=>({root:{"--psi-icon-size":N(t,"psi-icon-size"),"--psi-button-size":N(t,"psi-button-size")}})),O=Z((e,t)=>{const a=b("PasswordInput",ee,e),{classNames:c,className:r,style:o,styles:l,unstyled:n,vars:v,required:d,error:u,leftSection:g,disabled:f,id:y,variant:p,inputContainer:q,description:_,label:L,size:C,errorProps:x,descriptionProps:I,labelProps:M,withAsterisk:P,inputWrapperOrder:w,wrapperProps:$,radius:Q,rightSection:os,rightSectionWidth:ts,rightSectionPointerEvents:as,leftSectionWidth:ns,visible:rs,defaultVisible:is,onVisibilityChange:cs,visibilityToggleIcon:ls,visibilityToggleButtonProps:i,rightSectionProps:ds,leftSectionProps:us,leftSectionPointerEvents:ms,withErrorStyles:ps,mod:hs,...vs}=a,j=zs(y),[D,gs]=Rs({value:rs,defaultValue:is,finalValue:!1,onChange:cs}),E=()=>gs(!D),G=R({name:"PasswordInput",classes:F,props:a,className:r,style:o,classNames:c,styles:l,unstyled:n,vars:v,varsResolver:oe}),{resolvedClassNames:V,resolvedStyles:K}=ks({classNames:c,styles:l,props:a}),{styleProps:fs,rest:H}=Ls(vs),xs=ls,J=(x==null?void 0:x.id)||`${j}-error`,Y=(I==null?void 0:I.id)||`${j}-description`,T=`${!!u&&typeof u!="boolean"?J:""} ${!!_?Y:""}`,ys=T.trim().length>0?T.trim():void 0,Cs=s.jsx(A,{...G("visibilityToggle"),disabled:f,radius:Q,"aria-hidden":!i,tabIndex:-1,...i,variant:(i==null?void 0:i.variant)??"subtle",color:"gray",unstyled:n,onTouchEnd:m=>{var h;m.preventDefault(),(h=i==null?void 0:i.onTouchEnd)==null||h.call(i,m),E()},onMouseDown:m=>{var h;m.preventDefault(),(h=i==null?void 0:i.onMouseDown)==null||h.call(i,m),E()},onKeyDown:m=>{var h;(h=i==null?void 0:i.onKeyDown)==null||h.call(i,m),m.key===" "&&(m.preventDefault(),E())},children:s.jsx(xs,{reveal:D})});return s.jsx(X.Wrapper,{required:d,id:j,label:L,error:u,description:_,size:C,classNames:V,styles:K,__staticSelector:"PasswordInput",unstyled:n,withAsterisk:P,inputWrapperOrder:w,inputContainer:q,variant:p,labelProps:{...M,htmlFor:j},descriptionProps:{...I,id:Y},errorProps:{...x,id:J},mod:hs,...G("root"),...fs,...$,children:s.jsx(X,{component:"div",error:u,leftSection:g,size:C,classNames:{...V,input:Ms(F.input,V.input)},styles:K,radius:Q,disabled:f,__staticSelector:"PasswordInput",rightSectionWidth:ts,rightSection:os??Cs,variant:p,unstyled:n,leftSectionWidth:ns,rightSectionPointerEvents:as||"all",rightSectionProps:ds,leftSectionProps:us,leftSectionPointerEvents:ms,withAria:!1,withErrorStyles:ps,children:s.jsx("input",{required:d,"data-invalid":!!u||void 0,"data-with-left-section":!!g||void 0,...G("innerInput"),disabled:f,id:j,ref:t,...H,"aria-describedby":ys,autoComplete:H.autoComplete||"off",type:D?"text":"password"})})})});O.classes={...Qs.classes,...F};O.displayName="@mantine/core/PasswordInput";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var te=Ps("outline","lock","IconLock",[["path",{d:"M5 13a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v6a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2v-6z",key:"svg-0"}],["path",{d:"M11 16a1 1 0 1 0 2 0a1 1 0 0 0 -2 0",key:"svg-1"}],["path",{d:"M8 11v-4a4 4 0 1 1 8 0v4",key:"svg-2"}]]);const ae=()=>{const e=Os({validateInputOnChange:!0,initialValues:{username:"",password:""},validate:{username:r=>r.length<5?"Name must have at least 5 letters":null,password:r=>r.length<2?"Name must have at least 2 letters":null}}),t=Js(),a=$s();async function c(r){r.preventDefault(),await t.mutateAsync({data:e.values},{onError:({response:o,message:l})=>{if((o==null?void 0:o.status)===401){Fs({message:"Username atau password salah",color:"red",position:"top-center"});return}o!=null&&o.data.errors?e.setErrors(o.data.errors):Zs.show({message:JSON.parse(o==null?void 0:o.request.response).status??l??"Error",color:"red"})},onSuccess:o=>{console.log(o),Gs.setQueryData(["creds"],o.creds),Vs.setToken(o.token),a("/")}})}return s.jsxs("form",{onSubmit:c,children:[s.jsx("div",{className:"mb-4",children:s.jsx(qs,{name:"username",placeholder:"username",leftSection:s.jsx(Ds,{size:14}),...e.getInputProps("username")})}),s.jsx("div",{className:"mb-2",children:s.jsx(O,{name:"password",placeholder:"**********",leftSection:s.jsx(te,{size:14}),...e.getInputProps("password")})}),s.jsx("div",{className:"mt-7",children:s.jsx(Es,{color:"#654433",className:"mt-8",type:"submit",fullWidth:!0,loading:t.isPending,children:"Login"})})]})},me=({role:e,children:t})=>{const{creds:a}=Us();return e.includes((a==null?void 0:a.level)??"Owner")?s.jsx(s.Fragment,{children:t}):null},pe=()=>s.jsx("main",{className:"w-full mx-auto flex p-10 bg-brown min-h-screen",children:s.jsx("div",{className:"bg-white shadow-sm rounded-lg p-5 m-auto",children:s.jsxs("div",{className:"pt-10 w-full lg:w-[350px]",children:[s.jsx("div",{className:"flex items-center justify-center -mt-10",children:s.jsx(Ws,{src:"/images/kulakita-logo.png",w:140})}),s.jsx("h1",{className:"text-3xl font-bold",children:"Login"}),s.jsx("p",{className:"text-xs mb-7",children:"Selamat datang, kulateam!"}),s.jsx(ae,{})]})})});export{ge as AuthProvider,me as Authorization,pe as Login,ae as LoginForm,Us as useAuth};
