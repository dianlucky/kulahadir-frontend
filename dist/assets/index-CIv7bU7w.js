import{b as h,j as s,T as a,c as r,D as l,I as g,i as m,B as p,$ as v,r as x,l as w}from"./index-DchbcEn3.js";import{B as N}from"./Badge-B4nuYk5S.js";import{a as b,b as y}from"./getCashAdvance-DNIZnnFg.js";import{I as f}from"./IconChevronLeft-Ba9bOv7c.js";import{u as z}from"./updateCashAdvance-B7uqhgFv.js";import{I as C}from"./IconCashRegister-B8q-xVaN.js";const k=({cashAdvances:n})=>{const i=h();return s.jsxs(s.Fragment,{children:[n.length!=0&&n.filter(e=>e.status=="pending").map((e,t)=>s.jsx("button",{onClick:()=>i("/employee-cash-advance/detail",{state:{data:e}}),style:{marginTop:"4px"},children:s.jsxs("section",{className:"bg-white shadow-md rounded-lg p-2",children:[s.jsxs("div",{className:"grid grid-cols-12  px-2 py-3",children:[s.jsxs("div",{className:"col-span-2 text-center",children:[s.jsx(a,{fw:700,size:"27px",children:e.date&&r(e.date,"dd",{locale:m})}),s.jsx(a,{fw:400,size:"xs",mt:-6,ml:3,children:e.date&&r(e.date,"MMMM",{locale:m})})]}),s.jsx("div",{className:"col-span-1",children:s.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),s.jsxs("div",{className:"col-span-9",children:[s.jsx("div",{className:"flex justify-end -mt-3",children:s.jsx(N,{size:"xs",radius:"xs",color:e.status=="pending"?"grey":e.status=="accepted"?"green":"red",children:e.status})}),s.jsx("div",{className:"",children:s.jsxs(a,{fw:700,size:"20px",children:["Rp. ",new Intl.NumberFormat("id-ID").format(e.amount)]})})]})]}),s.jsx(l,{mt:-9,mb:2}),s.jsx("div",{className:"my-1 px-2 text-start",children:s.jsxs(a,{fw:500,size:"xs",children:["Pegawai : ",e.employee.name]})})]})},t)),n.filter(e=>e.status=="pending").length==0&&s.jsx("div",{className:"bg-white shadow-sm p-4 rounded-xl",children:s.jsxs("div",{className:"mt-2 px-3 py-2",children:[s.jsx("div",{className:"flex justify-center",children:s.jsx(g,{src:"/images/not-found.svg",style:{width:"120px"}})}),s.jsx("div",{className:"flex justify-center",children:s.jsx(a,{fw:700,size:"md",children:"Ups!"})}),s.jsx("div",{className:"flex justify-center -mt-1",children:s.jsx(a,{fw:700,size:"sm",children:"Tidak ada pengajuan kasbon"})})]})})]})},I=({cashAdvance:n,totalCashAdvance:i})=>{const e=h(),t=z(n.id),c=async d=>{const j={status:d};await t.mutateAsync(j,{onSuccess:o=>{console.log("Success:",o),e(-1),v({message:"Berhasil mengubah status pengajuan kasbon",color:"green",position:"top-center"}),close()}})};return s.jsxs("section",{className:"bg-white mx-auto max-w-sm w-full shadow-sm rounded-xl z-50 relative p-4",children:[s.jsxs("div",{className:"flex justify-between text-xs items-center mb-2",children:[s.jsx(a,{fw:700,c:"#654433",children:"Detail pengajuan kasbon"}),s.jsx(C,{className:"opacity-80",size:24})]}),s.jsx(l,{size:"xs",className:"mb-2"}),s.jsx("div",{className:"mt-2 mb-2",children:s.jsx("div",{className:"flex justify-center gap-2 px-2 my-auto",children:s.jsxs("div",{className:"my-auto",children:[s.jsx(a,{fw:700,size:"18px",truncate:"end",children:n.employee.name}),s.jsx(a,{fw:300,size:"xs",mt:-3,children:n.employee.account.status})]})})}),s.jsx(l,{}),s.jsxs("div",{className:"grid grid-cols-12 px-2 mt-2 mb-2",children:[s.jsxs("div",{className:"col-span-12",children:[s.jsx(a,{fw:500,size:"xs",children:"Total kasbon bulan ini :"}),s.jsxs(a,{fw:700,size:"sm",mt:-1,children:["Rp. ",new Intl.NumberFormat("id-ID").format(i)]})]}),s.jsx("div",{className:"col-span-12 mt-2",children:s.jsx(l,{})}),s.jsxs("div",{className:"col-span-12 mt-1",children:[s.jsx(a,{fw:500,size:"xs",children:"Tanggal pengajuan :"}),s.jsx(a,{fw:700,size:"sm",mt:-1,children:n.created_at&&r(n.created_at,"EEEE, dd MMMM yyyy",{locale:m})})]}),s.jsxs("div",{className:"col-span-12 mt-1",children:[s.jsx(a,{fw:500,size:"xs",children:"Kasbon yang diajukan :"}),s.jsxs(a,{fw:700,size:"sm",mt:-1,children:["Rp.",new Intl.NumberFormat("id-ID").format(n.amount)]})]}),s.jsxs("div",{className:"col-span-12 mt-1",children:[s.jsx(a,{fw:500,size:"xs",children:"Alasan pengajuan kasbon :"}),s.jsx(a,{fw:700,size:"sm",mt:-1,children:n.reason})]})]}),s.jsx(l,{}),s.jsxs("div",{className:"flex gap-2 px-1",children:[s.jsx(p,{fullWidth:!0,color:"red",onClick:()=>c("rejected"),children:"Tolak"}),s.jsx(p,{fullWidth:!0,color:"blue",onClick:()=>c("accepted"),children:"Setujui"})]})]})},T=()=>{const n=h(),[i,e]=x.useState([]),{data:t}=b();return x.useEffect(()=>{t&&e(t)},[t]),s.jsxs("main",{children:[s.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),s.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{children:s.jsx(f,{onClick:()=>{n(-1)},size:21,className:"font-bold rounded-md"})}),s.jsx("div",{className:"font-semibold text-brown",children:s.jsx("h2",{className:"font-semibold",children:"Permintaan kasbon"})}),s.jsx("div",{})]})}),s.jsx("div",{children:s.jsx("div",{className:"mt-2 mx-6",children:s.jsx(k,{cashAdvances:i})})})]})},R=()=>{const n=h(),e=w().state.data;console.log(e);const[t,c]=x.useState([]),{data:d}=y(r(new Date,"yyyy-MM",{locale:m}),e.employee_id);x.useEffect(()=>{d&&c(d)});const j=t.reduce((o,u)=>u.status==="accepted"?o+u.amount:o,0);return s.jsxs("main",{children:[s.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),s.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10",children:s.jsxs("div",{className:"flex justify-between",children:[s.jsx("div",{children:s.jsx(f,{onClick:()=>{n(-1)},size:21,className:"font-bold rounded-md"})}),s.jsx("div",{className:"font-semibold text-brown",children:s.jsx("h2",{className:"font-semibold",children:"Detail permintaan kasbon"})}),s.jsx("div",{})]})}),s.jsx("div",{children:s.jsx("div",{className:"mt-2 mx-6",children:s.jsx(I,{cashAdvance:e,totalCashAdvance:j})})})]})};export{k as CashAdvanceList,T as CashAdvanceOwnerPage,R as DetailCashAdvanceOwnerPage,I as DetailCashAdvanceSection};
