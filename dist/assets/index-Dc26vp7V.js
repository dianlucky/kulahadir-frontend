import{g as L,j as e,D as x,T as w,B as i,s as O,k as Y,e as K,r as t,c,i as f,P as p}from"./index-DhziyjX6.js";import{I as W}from"./IconCategory-Lttducfn.js";import{I as q}from"./IconInfoCircle-1O8h3Su7.js";import{I as X}from"./IconUsers-Bk29FYiS.js";import{I as Q}from"./IconCalendarCheck-A1rtQBN6.js";import{I as J}from"./IconCashRegister-Dvo4In5Z.js";import{u as V}from"./getEmployee-Dgj6vptt.js";import{T as s}from"./Table-CSzy5nHv.js";import{I as C}from"./IconAdjustments-CrarFxeb.js";import{S as G}from"./Select-BAmYL70K.js";import{M as Z}from"./MonthPickerInput-CnbmSOVx.js";import{i as ee}from"./getAttendance-C_oeT6yV.js";import{D as se}from"./DatePickerInput-8f7Mxjzt.js";import"./Input-Dm5-gGl7.js";import"./CheckIcon-P4tLnAac.js";import"./InputBase-BWEPP0b6.js";import"./use-dates-state-BgkaIGkW.js";import"./use-dates-input-D_3xr4Am.js";import"./MonthPicker-CoC0Kwom.js";import"./DatePicker-CbY-u6CD.js";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var $=L("outline","file-type-pdf","IconFileTypePdf",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4",key:"svg-1"}],["path",{d:"M5 18h1.5a1.5 1.5 0 0 0 0 -3h-1.5v6",key:"svg-2"}],["path",{d:"M17 18h2",key:"svg-3"}],["path",{d:"M20 15h-3v6",key:"svg-4"}],["path",{d:"M11 15v6h1a2 2 0 0 0 2 -2v-2a2 2 0 0 0 -2 -2h-1z",key:"svg-5"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var P=L("outline","file-type-xls","IconFileTypeXls",[["path",{d:"M14 3v4a1 1 0 0 0 1 1h4",key:"svg-0"}],["path",{d:"M5 12v-7a2 2 0 0 1 2 -2h7l5 5v4",key:"svg-1"}],["path",{d:"M4 15l4 6",key:"svg-2"}],["path",{d:"M4 21l4 -6",key:"svg-3"}],["path",{d:"M17 20.25c0 .414 .336 .75 .75 .75h1.25a1 1 0 0 0 1 -1v-1a1 1 0 0 0 -1 -1h-1a1 1 0 0 1 -1 -1v-1a1 1 0 0 1 1 -1h1.25a.75 .75 0 0 1 .75 .75",key:"svg-4"}],["path",{d:"M11 15v6h3",key:"svg-5"}]]);const ae=({setMenu:r})=>{const d=[{key:"Pegawai",title:"Data Pegawai",description:"Data pegawai kulakita",icon:e.jsx(X,{size:40})},{key:"Kehadiran",title:"Data Kehadiran",description:"Data kehadiran pegawai kulakita",icon:e.jsx(Q,{size:40})},{key:"Gaji",title:"Data Gaji ",description:"Data gaji bulanan pegawai kulakita",icon:e.jsx(J,{size:40})}];return e.jsxs("section",{className:"bg-white shadow-sm p-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("div",{className:"text-dark font-semibold cursor-pointer text-md",children:"List Laporan"}),e.jsx("div",{children:e.jsx(W,{})})]}),e.jsx(x,{}),d.map((a,j)=>e.jsx("div",{className:"mt-4",children:e.jsxs("div",{className:"bg-slate-50 shadow-xs grid grid-cols-12 rounded-xl p-3",children:[e.jsx("div",{className:"col-span-1 flex justify-center",children:a.icon}),e.jsx("div",{className:"col-span-1 text-center",children:e.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),e.jsxs("div",{className:"col-span-8 my-auto",children:[e.jsx("div",{children:e.jsx(w,{fw:"bold",size:"sm",truncate:"end",children:a.title})}),e.jsx("div",{className:"-mt-1",children:e.jsx(w,{size:"xs",fs:"italic",truncate:"end",children:a.description})})]}),e.jsx("div",{className:"col-span-2 flex justify-end my-auto",children:e.jsx(i,{size:"xs",variant:"subtle",color:"gray",onClick:()=>r(a.key),children:e.jsx(q,{color:"#4E71FF"})})})]})},j))]})},g=async(r,d)=>{const a=await fetch(r,{headers:{Authorization:`Bearer ${O.getToken()}`}});if(!a.ok)throw console.error(`Gagal mengunduh file: ${a.status} ${a.statusText}`),new Error(`Gagal mengunduh file: ${a.status} ${a.statusText}`);const j=await a.blob(),n=document.createElement("a");n.href=window.URL.createObjectURL(j),n.download=d,document.body.appendChild(n),n.click(),document.body.removeChild(n),window.URL.revokeObjectURL(n.href)},te="https://dianlucky.my.id/api";async function le(){return(await K.get(`${te}/salaries`,{headers:{Authorization:`Bearer ${O.getToken()}`}})).data.data}const ie=()=>Y({queryKey:["salary-all"],queryFn:()=>le()}),B="https://dianlucky.my.id/api",ne=()=>{const[r,d]=t.useState(!1),[a,j]=t.useState("Semua"),[n,v]=t.useState("Semua"),[m,b]=t.useState([]),{data:u}=V();t.useEffect(()=>{u&&b(u)},[u]);const M=m.filter(l=>(n==="Semua"?!0:l.account.status===n)&&l.account.level=="Pegawai").map((l,o)=>e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:o+1}),e.jsx(s.Td,{children:l.name}),e.jsx(s.Td,{children:l.birth_date?c(l.birth_date,"dd MMMM yyyy",{locale:f}):"-"}),e.jsx(s.Td,{children:l.phone}),e.jsx(s.Td,{children:l.account.level}),e.jsx(s.Td,{children:l.account.status})]},o)),k=()=>{g(`${B}/employees/pdf?status=${a}`,`laporan-pegawai-${a}.pdf`)},N=()=>{g(`${B}/employees/excel?status=${a}`,"laporan-pegawai.xlsx")};return e.jsxs("section",{className:"bg-white shadow-sm p-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("div",{className:"text-dark font-semibold cursor-pointer text-md",children:"Data Pegawai"}),e.jsxs(p,{width:250,position:"bottom",withArrow:!0,shadow:"md",opened:r,closeOnClickOutside:!0,children:[e.jsx("div",{children:e.jsxs(i.Group,{className:"gap-1",children:[e.jsx(p.Target,{children:e.jsx(i,{size:"xs",color:"blue",onClick:()=>d(l=>!l),children:e.jsx(C,{size:20})})}),e.jsx(i,{size:"xs",color:"red",onClick:k,children:e.jsx($,{size:20})}),e.jsx(i,{size:"xs",color:"green",onClick:N,children:e.jsx(P,{size:20})})]})}),e.jsx(p.Dropdown,{children:e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(w,{size:"sm",fw:"bolder",children:"Filter"}),e.jsx(x,{className:"mb-2"}),e.jsx(G,{label:"status",size:"xs",value:a,onChange:j,data:[{label:"Pegawai tetap",value:"Pegawai tetap"},{label:"Part time",value:"Part time"},{label:"Semua",value:"Semua"}]})]}),e.jsx(x,{}),e.jsx("div",{children:e.jsx(i,{fullWidth:!0,size:"xs",onClick:()=>{v(a),d(!1)},children:"Simpan"})})]})})]})]}),e.jsx(x,{}),e.jsx("div",{children:e.jsx("div",{className:"mt-3",children:e.jsxs(s,{striped:!0,highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,className:"text-dark font-semibold cursor-pointer text-sm",children:[e.jsx(s.Thead,{children:e.jsxs(s.Tr,{children:[e.jsx(s.Th,{className:"font-semibold",children:"No"}),e.jsx(s.Th,{className:"font-semibold",children:"Nama"}),e.jsx(s.Th,{className:"font-semibold",children:"Tanggal lahir"}),e.jsx(s.Th,{className:"font-semibold",children:"No.WA"}),e.jsx(s.Th,{className:"font-semibold",children:"Role"}),e.jsx(s.Th,{className:"font-semibold",children:"Status"})]})}),e.jsx(s.Tbody,{children:M})]})})})]})},D="https://dianlucky.my.id/api",oe=()=>{const[r,d]=t.useState(!1),[a,j]=t.useState(new Date),[n,v]=t.useState(new Date),[m,b]=t.useState("Semua"),[u,M]=t.useState("Semua"),[k,N]=t.useState([]),{data:l}=ie();t.useEffect(()=>{l&&N(l)},[l]);const o=k.filter(h=>{var E,I,F,R;const S=new Date(h.date),A=new Date(n||""),U=S.getMonth()===A.getMonth()&&S.getFullYear()===A.getFullYear(),_=u==="Semua"||((I=(E=h.employee)==null?void 0:E.account)==null?void 0:I.status)===u,H=((R=(F=h.employee)==null?void 0:F.account)==null?void 0:R.level)==="Pegawai";return U&&_&&H}).map((h,S)=>e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:S+1}),e.jsx(s.Td,{children:h.employee.name}),e.jsx(s.Td,{children:h.date?c(h.date,"dd MMMM yyyy",{locale:f}):"-"}),e.jsxs(s.Td,{children:["Rp. ",new Intl.NumberFormat("id-ID").format(h.amount)]}),e.jsx(s.Td,{children:h.employee.account.status})]},S)),y=()=>{g(`${D}/salaries/pdf?status=${m}&month=${c(a||new Date,"yyyy-MM")}`,`laporan-gaji-pegawai-${c(a||new Date,"MMMM yyyy",{locale:f})}-${m}.pdf`)},T=()=>{console.log("URL :",`${D}/salaries/excel?status=${m}&month=${c(a||new Date,"yyyy-MM")}`),g(`${D}/salaries/excel?status=${m}&month=${c(a||new Date,"yyyy-MM")}`,"laporan-pegawai.xlsx")};return e.jsxs("section",{className:"bg-white shadow-sm p-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("div",{className:"text-dark font-semibold cursor-pointer text-md",children:"Data Gaji pegawai"}),e.jsxs(p,{width:250,position:"bottom",withArrow:!0,shadow:"md",opened:r,closeOnClickOutside:!0,children:[e.jsx("div",{children:e.jsxs(i.Group,{className:"gap-1",children:[e.jsx(p.Target,{children:e.jsx(i,{size:"xs",color:"blue",onClick:()=>d(h=>!h),children:e.jsx(C,{size:20})})}),e.jsx(i,{size:"xs",color:"red",onClick:y,children:e.jsx($,{size:20})}),e.jsx(i,{size:"xs",color:"green",onClick:T,children:e.jsx(P,{size:20})})]})}),e.jsx(p.Dropdown,{children:e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(w,{size:"sm",fw:"bolder",children:"Filter"}),e.jsx(x,{className:"mb-2"}),e.jsx(G,{label:"status",size:"sm",value:m,onChange:b,data:[{label:"Pegawai tetap",value:"Pegawai tetap"},{label:"Part time",value:"Part time"},{label:"Semua",value:"Semua"}]}),e.jsx(Z,{label:"bulan",onChange:j,value:a})]}),e.jsx(x,{}),e.jsx("div",{children:e.jsx(i,{fullWidth:!0,size:"xs",onClick:()=>{v(a),M(m),d(!1)},children:"Simpan"})})]})})]})]}),e.jsx(x,{}),e.jsx("div",{children:e.jsx("div",{className:"mt-3",children:e.jsxs(s,{striped:!0,highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,className:"text-dark font-semibold cursor-pointer text-sm",children:[e.jsx(s.Thead,{children:e.jsxs(s.Tr,{children:[e.jsx(s.Th,{className:"font-semibold",children:"No"}),e.jsx(s.Th,{className:"font-semibold",children:"Nama"}),e.jsx(s.Th,{className:"font-semibold",children:"Bulan"}),e.jsx(s.Th,{className:"font-semibold",children:"Gaji"}),e.jsx(s.Th,{className:"font-semibold",children:"Status"})]})}),e.jsx(s.Tbody,{children:o})]})})})]})},z="https://dianlucky.my.id/api",ce=()=>{const[r,d]=t.useState(!1),[a,j]=t.useState(new Date),[n,v]=t.useState(new Date),[m,b]=t.useState([]),{data:u,refetch:M}=ee(c(a||new Date,"yyyy-MM"));t.useEffect(()=>{u&&b(u)},[u]),t.useEffect(()=>{M()},[a]),console.log(m);const k=m.filter(o=>{const y=new Date(o.schedule.date),T=new Date(n||"");return y.getDay()===T.getDay()&&y.getMonth()===T.getMonth()&&y.getFullYear()===T.getFullYear()}).map((o,y)=>e.jsxs(s.Tr,{children:[e.jsx(s.Td,{children:y+1}),e.jsx(s.Td,{children:o.schedule.employee.name}),e.jsx(s.Td,{children:o.check_in?c(o.check_in,"HH:mm",{locale:f}):"-"}),e.jsx(s.Td,{children:o.check_out?c(o.check_out,"HH:mm",{locale:f}):"-"}),e.jsx(s.Td,{children:o.schedule.attendance_status})]},y)),N=()=>{console.log(`${z}/attendances/pdf?&date=${c(a||new Date,"yyyy-MM-dd")}`),g(`${z}/attendances/pdf?&date=${c(a||new Date,"yyyy-MM-dd")}`,`laporan-kehadiran-pegawai-${c(a||new Date,"dd MMMM yyyy",{locale:f})}.pdf`)},l=()=>{g(`${z}/attendances/excel?date=${c(a||new Date,"yyyy-MM-dd")}`,`laporan-pegawai-${c(a||new Date,"dd MMMM yyyy",{locale:f})}.xlsx`)};return e.jsxs("section",{className:"bg-white shadow-sm p-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsxs("div",{className:"text-dark font-semibold cursor-pointer text-md",children:["Data Kehadiran pegawai"," ",c(a||new Date,"EEEE, dd MMMM yyyy",{locale:f})]}),e.jsxs(p,{width:250,position:"bottom",withArrow:!0,shadow:"md",opened:r,closeOnClickOutside:!0,children:[e.jsx("div",{children:e.jsxs(i.Group,{className:"gap-1",children:[e.jsx(p.Target,{children:e.jsx(i,{size:"xs",color:"blue",onClick:()=>d(o=>!o),children:e.jsx(C,{size:20})})}),e.jsx(i,{size:"xs",color:"red",onClick:N,children:e.jsx($,{size:20})}),e.jsx(i,{size:"xs",color:"green",onClick:l,children:e.jsx(P,{size:20})})]})}),e.jsx(p.Dropdown,{children:e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"mb-3",children:[e.jsx(w,{size:"sm",fw:"bolder",children:"Filter"}),e.jsx(x,{className:"mb-2"}),e.jsx(se,{label:"Tanggal",onChange:j,value:a})]}),e.jsx(x,{}),e.jsx("div",{children:e.jsx(i,{fullWidth:!0,size:"xs",onClick:()=>{v(a),d(!1)},children:"Simpan"})})]})})]})]}),e.jsx(x,{}),e.jsx("div",{children:e.jsx("div",{className:"mt-3",children:e.jsxs(s,{striped:!0,highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,className:"text-dark font-semibold cursor-pointer text-sm",children:[e.jsx(s.Thead,{children:e.jsxs(s.Tr,{children:[e.jsx(s.Th,{className:"font-semibold",children:"No"}),e.jsx(s.Th,{className:"font-semibold",children:"Nama"}),e.jsx(s.Th,{className:"font-semibold",children:"Check-in"}),e.jsx(s.Th,{className:"font-semibold",children:"Check-out"}),e.jsx(s.Th,{className:"font-semibold",children:"Status"})]})}),e.jsx(s.Tbody,{children:k})]})})})]})},ze=()=>{const[r,d]=t.useState();return e.jsx("section",{children:e.jsxs("div",{className:"bg-white shadow-lg p-6 rounded-lg",children:[e.jsx("div",{className:"flex justify-center mb-4",children:e.jsx(w,{fw:"bolder",size:"lg",c:"#343a40",children:"Laporan"})}),e.jsx(x,{}),e.jsxs("div",{className:"grid grid-cols-12 mt-4 gap-3",children:[e.jsx("div",{className:"col-span-4 mb-59",children:e.jsx(ae,{setMenu:d})}),e.jsxs("div",{className:"col-span-8",children:[r=="Pegawai"&&e.jsx(ne,{}),r=="Kehadiran"&&e.jsx(ce,{}),r=="Gaji"&&e.jsx(oe,{})]})]})]})})};export{ze as ReportPageAdmin};
