import{r as x,u as T,ad as Y,j as e,ae as _,f as Z,a as ee,ab as se,C as ae,g as U,e as te,s as ne,d as le,h as I,b as j,U as ie,D as p,T as o,I as oe,B as v,$ as V,c as C,i as E,l as re}from"./index-DchbcEn3.js";import{R as ce}from"./RequestList-DIILwEhU.js";import{u as de}from"./getLeaveRequest-riJ2k7pN.js";import{g as ts}from"./getLeaveRequest-riJ2k7pN.js";import{I as M}from"./IconChevronLeft-Ba9bOv7c.js";import{I as me}from"./IconPlus-N4RzHpDK.js";import{u as ue}from"./updateLeaveRequest-DEDP1bDR.js";import{B as pe}from"./Badge-B4nuYk5S.js";import{u as xe}from"./use-form-Doffpo57.js";import{S as he}from"./Select-CTPlfOJ6.js";import{D as je}from"./DatePickerInput-BQCf27D-.js";import{I as fe}from"./Input-CVfrLFOp.js";import{I as q}from"./InputBase-CViaEvXX.js";import{T as ge}from"./Textarea-Msuvb1ho.js";import"./CheckIcon-njzRFbAo.js";import"./use-dates-state-C-id8Dn8.js";import"./use-dates-input-CRuWh4sm.js";import"./DatePicker-Dl3zH5kF.js";const ye={multiple:!1},$=x.forwardRef((s,t)=>{const{onChange:a,children:r,multiple:n,accept:l,name:i,form:d,resetRef:h,disabled:b,capture:N,inputProps:w,...k}=T("FileButton",ye,s),u=x.useRef(null),z=()=>{var m;!b&&((m=u.current)==null||m.click())},f=m=>{a(n?Array.from(m.currentTarget.files):m.currentTarget.files[0]||null)};return Y(h,()=>{u.current&&(u.current.value="")}),e.jsxs(e.Fragment,{children:[e.jsx("input",{style:{display:"none"},type:"file",accept:l,multiple:n,onChange:f,ref:_(t,u),name:i,form:d,capture:N,...w}),r({onClick:z,...k})]})});$.displayName="@mantine/core/FileButton";const ve=({value:s})=>e.jsx("div",{style:{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:Array.isArray(s)?s.map(t=>t.name).join(", "):s==null?void 0:s.name}),be={valueComponent:ve},L=Z((s,t)=>{const a=T("FileInput",be,s),{unstyled:r,vars:n,onChange:l,value:i,defaultValue:d,multiple:h,accept:b,name:N,form:w,valueComponent:k,clearable:u,clearButtonProps:z,readOnly:f,capture:S,fileInputProps:m,rightSection:D,size:P,placeholder:O,component:W,resetRef:K,classNames:R,styles:A,...G}=a,g=x.useRef(null),{resolvedClassNames:H,resolvedStyles:J}=ee({classNames:R,styles:A,props:a}),[c,F]=se({value:i,defaultValue:d,onChange:l,finalValue:h?[]:null}),B=Array.isArray(c)?c.length!==0:c!==null,Q=D||(u&&B&&!f?e.jsx(ae,{...z,variant:"subtle",onClick:()=>F(h?[]:null),size:P,unstyled:r}):null);x.useEffect(()=>{var y;(Array.isArray(c)&&c.length===0||c===null)&&((y=g.current)==null||y.call(g))},[c]);const X=k;return e.jsx($,{onChange:F,multiple:h,accept:b,name:N,form:w,resetRef:_(g,K),disabled:f,capture:S,inputProps:m,children:y=>e.jsx(q,{component:W||"button",ref:t,rightSection:Q,...y,...G,__staticSelector:"FileInput",multiline:!0,type:"button",pointer:!0,__stylesApiProps:a,unstyled:r,size:P,classNames:R,styles:A,children:B?e.jsx(X,{value:c}):e.jsx(fe.Placeholder,{__staticSelector:"FileInput",classNames:H,styles:J,children:O})})})});L.classes=q.classes;L.displayName="@mantine/core/FileInput";const Ne=L;/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var we=U("outline","clipboard-text","IconClipboardText",[["path",{d:"M9 5h-2a2 2 0 0 0 -2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2 -2v-12a2 2 0 0 0 -2 -2h-2",key:"svg-0"}],["path",{d:"M9 3m0 2a2 2 0 0 1 2 -2h2a2 2 0 0 1 2 2v0a2 2 0 0 1 -2 2h-2a2 2 0 0 1 -2 -2z",key:"svg-1"}],["path",{d:"M9 12h6",key:"svg-2"}],["path",{d:"M9 16h6",key:"svg-3"}]]);/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var ke=U("outline","notes","IconNotes",[["path",{d:"M5 3m0 2a2 2 0 0 1 2 -2h10a2 2 0 0 1 2 2v14a2 2 0 0 1 -2 2h-10a2 2 0 0 1 -2 -2z",key:"svg-0"}],["path",{d:"M9 7l6 0",key:"svg-1"}],["path",{d:"M9 11l6 0",key:"svg-2"}],["path",{d:"M9 15l4 0",key:"svg-3"}]]);const ze="https://dianlucky.my.id/api",Ce=s=>{for(const[t,a]of s.entries())console.log(`${t}:`,a)},Ie=async s=>(Ce(s),(await te.post(`${ze}/leaves/`,s,{headers:{Authorization:`Bearer ${ne.getToken()}`,"Content-Type":"multipart/form-data"}})).data),Me=()=>le({mutationFn:Ie,onMutate:async()=>{},onError:s=>{console.log("Error :",s)}}),Ye=()=>{const{creds:s}=I(),t=j(),[a,r]=x.useState([]),{data:n}=de(s==null?void 0:s.employee_id);return x.useEffect(()=>{n&&r(n)},[n]),console.log("data leave request : ",a),e.jsxs("main",{children:[e.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),e.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{className:"",children:e.jsx(M,{onClick:()=>{t(-1)},size:21,className:"font-bold rounded-md"})}),e.jsx("div",{className:"font-semibold text-brown",children:e.jsx("h2",{className:"font-semibold",children:"Pengajuan izin"})}),e.jsx("div",{className:"mr-2",children:e.jsx(ie,{onClick:()=>{t("/leave-request/add")},children:e.jsx(me,{size:22})})})]})}),e.jsx("div",{className:"mt-1 mx-6",children:e.jsx(ce,{leaveRequests:a})})]})},Le="https://dianlucky.my.id/api",Se="https://kulahadir.awwa.my.id",Pe="/images/splash.png",Re=({leaveRequestData:s})=>{const{creds:t}=I(),a=j(),r=ue(s.id),n=async l=>{const i={status:l};await r.mutateAsync(i,{onSuccess:d=>{console.log("Success:",d),a(-1),V({message:"Status pengajuan berhasil diubah",color:"green",position:"top-center"}),close()}})};return e.jsxs("section",{className:"bg-white mx-auto max-w-sm w-full mt-1 shadow-lg rounded-xl z-50 relative p-2 px-2 text-slate-700",children:[e.jsxs("div",{className:"flex justify-between text-xs items-center mt-1 -mb-1 px-2",children:[e.jsx("span",{style:{fontSize:"14px"},className:"font-bold text-brown",children:"Lampiran dan keterangan"}),e.jsx(we,{className:"opacity-100",size:20})]}),e.jsx(p,{my:"sm"}),e.jsxs("div",{className:"w-full grid grid-cols-1 pb-2 pt-2 -mt-2",children:[e.jsxs("div",{className:"gap-2 mt-0 ms-3",children:[(t==null?void 0:t.level)=="Owner"&&e.jsxs(e.Fragment,{children:[" ",e.jsxs("div",{className:"flex mb-1",children:[e.jsx(o,{size:"sm",fw:700,children:"Pegawai :"}),e.jsx(o,{size:"sm",fw:700,ml:2,truncate:"end",children:s.employee.name})]})]}),e.jsx(o,{size:"sm",fw:700,children:"Lampiran :"}),e.jsx(oe,{radius:"md",h:200,style:{justifyContent:"center",padding:"10",width:"90% "},fit:"contain",src:s.attachment?`${Le}/uploads/attachments/${s.attachment}`:Se+Pe})]}),e.jsxs("div",{className:"gap-2 mb-5 ms-3",children:[e.jsxs(o,{size:"sm",fw:700,children:["Keterangan : ",s.reason]}),e.jsx(o,{size:"sm"})]}),(t==null?void 0:t.level)=="Owner"&&s.status=="pending"&&e.jsxs("div",{children:[e.jsx("div",{className:"my-1 px-2 mb-2",children:e.jsx(p,{})}),e.jsxs("div",{className:"flex gap-2 px-1",children:[e.jsx(v,{fullWidth:!0,color:"red",onClick:()=>n("rejected"),children:"Tolak"}),e.jsx(v,{fullWidth:!0,color:"blue",onClick:()=>n("accepted"),children:"Setujui"})]})]})]})]})},Ae=({leaveRequestData:s})=>e.jsxs("section",{className:"bg-white mx-auto max-w-sm w-full mt-2 shadow-lg rounded-xl z-50 relative p-2 px-2 ",children:[e.jsxs("div",{className:"flex justify-between text-xs items-center mt-1 -mb-1 px-2",children:[e.jsx("span",{style:{fontSize:"14px"},className:"font-bold text-brown capitalize",children:s.type}),e.jsx("div",{className:"-mt-2",children:e.jsx(pe,{size:"xs",style:{marginLeft:"4px",borderRadius:"2px"},color:s.status=="pending"?"grey":s.status=="accepted"?"green":"red",children:s.status})})]}),e.jsx(p,{my:"sm"}),e.jsx("div",{className:"w-full grid grid-cols-1 pb-2 pt-2 ms-4 -mt-2",children:e.jsxs("div",{className:"w-full grid grid-cols-12 p-1 -mb-2",children:[e.jsxs("div",{className:"col-span-2 text-center my-auto -ml-2",children:[e.jsx(o,{size:"50px",fw:700,children:"1"}),e.jsx(o,{style:{marginTop:"-5px"},size:"md",children:"Hari"})]}),e.jsx(p,{orientation:"vertical",className:"col-span-1 ml-3"}),e.jsxs("div",{className:"col-span-9 ms-2 text-left mb-2 -ml-2",children:[e.jsxs("div",{className:"ms-2 -mb-2",children:[e.jsx(o,{size:"sm",fw:700,children:"Tanggal izin :"}),e.jsx(o,{size:"sm",children:C(s.date,"EEEE, dd MMMM yyyy",{locale:E})})]}),e.jsx(p,{my:"sm"}),e.jsxs("div",{className:"ms-2 -mt-2",children:[e.jsx(o,{size:"sm",fw:700,children:"Tanggal pengajuan :"}),e.jsxs(o,{size:"sm",children:[" ",C(s.created_at,"EEEE, dd MMMM yyyy",{locale:E})]})]})]})]})})]}),Fe=()=>{const{creds:s}=I(),t=j(),a=xe({validateInputOnChange:!0,initialValues:{type:"",date:new Date,reason:"",attachment:null},validate:{reason:l=>l.length<5?"Minimal 5 karakter":null}}),r=Me(),n=async l=>{if(l.preventDefault(),!a.isValid())return;const i=new FormData;i.append("type",a.values.type),i.append("date",C(a.values.date,"yyyy-MM-dd")),i.append("reason",a.values.reason),(s==null?void 0:s.employee_id)!==void 0&&i.append("employee_id",s.employee_id.toString()),a.values.attachment!=null&&i.append("profile_pic",a.values.attachment),await r.mutateAsync(i,{onSuccess:d=>{console.log("Success:",d),a.reset(),t(-1),V({message:"Berhasil menambah pengajuan",color:"green",position:"top-center"}),close()}})};return e.jsxs("div",{className:"mt-2 p-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("div",{children:e.jsx(o,{fw:700,size:"md",c:"#222222",children:"Ajukan izin / sakit"})}),e.jsx("div",{children:e.jsx(ke,{color:"#222222"})})]}),e.jsx(p,{}),e.jsxs("form",{onSubmit:n,children:[e.jsx("div",{className:"mt-1",children:e.jsx(he,{label:"Tipe pengajuan",size:"sm",data:[{label:"sakit",value:"sakit"},{label:"izin",value:"izin"}],...a.getInputProps("type")})}),e.jsx("div",{className:"mt-1",children:e.jsx(je,{label:"Tanggal izin",size:"sm",placeholder:"Pick date",...a.getInputProps("date"),onChange:l=>{l&&a.setFieldValue("date",l)}},a.key("date"))}),e.jsx("div",{className:"mt-1",children:e.jsx(Ne,{label:"Lampiran",placeholder:"Masukkan gambar",accept:"image/*",...a.getInputProps("attachment")})}),e.jsx("div",{className:"mt-1",children:e.jsx(ge,{size:"sm",label:"Keterangan",placeholder:"Masukkan alasan pengajuan",...a.getInputProps("reason")},a.key("reason"))}),e.jsxs("div",{className:"mt-4 flex justify-between gap-2",children:[e.jsx(v,{size:"sm",onClick:()=>{t("/leave-request")},fullWidth:!0,color:"gray",children:"Kembali"}),e.jsx(v,{type:"submit",fullWidth:!0,children:"Ajukan"})]})]})]})},Ze=()=>{const s=j(),a=re().state.data;return console.log("data izin :",a),e.jsxs("main",{children:[e.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),e.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10 mb-2",children:e.jsxs("div",{className:"grid grid-cols-12",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(M,{onClick:()=>{s(-1)},size:21,className:"font-bold rounded-md"})}),e.jsx("div",{className:"col-span-11 text-center -ml-4 font-semibold text-brown",children:e.jsxs("h2",{className:"font-semibold",children:["Detail ",a==null?void 0:a.type]})})]})}),e.jsx("div",{className:"mx-6",children:e.jsx(Ae,{leaveRequestData:a})}),e.jsx("div",{className:"mx-6",children:e.jsx(Re,{leaveRequestData:a})})]})},es=()=>{const s=j();return e.jsxs("main",{children:[e.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),e.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10 mb-2",children:e.jsxs("div",{className:"grid grid-cols-12 mb-1",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(M,{onClick:()=>{s(-1)},size:21,className:"font-bold rounded-md"})}),e.jsx("div",{className:"col-span-11 text-center -ml-4 font-semibold text-brown",children:e.jsx("h2",{className:"font-semibold",children:"Ajukan izin"})})]})}),e.jsx("section",{className:"bg-white shadow-md rounded-lg mt-2 mx-6 mb-20",children:e.jsx(Fe,{})})]})};export{Re as AttachmentDescriptionCard,es as CreateLeaveRequestPage,Ae as DateDetailCard,Ze as DetailLeaveRequestPage,Fe as FormAddRequest,Ye as LeaveRequestPage,Ie as createLeaveRequest,ts as getLeaveRequestByEmployeeId,Me as useCreateLeaveRequest,de as useGetLeaveRequestByEmployeeId,ue as useUpdateLeaveRequestById};
