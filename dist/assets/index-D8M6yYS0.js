import{g as w,e as k,s as C,d as z,z as M,b as h,r as j,j as e,T as n,D as p,c as m,B as d,I as A,a5 as I,i as x,h as f,$ as D,l as E}from"./index-DhziyjX6.js";import{u as S}from"./deleteCashAdvance-CSoz8FPk.js";import{I as B}from"./IconTrash-B03RvnVl.js";import{I as T}from"./IconEye-BL4H6I6K.js";import{M as R}from"./MonthPickerSection-1zBITLlh.js";import{b as P}from"./getCashAdvance-XJN4PnKS.js";import{d as pe,c as ve,g as fe,a as ge,u as be}from"./getCashAdvance-XJN4PnKS.js";import{I as g}from"./IconChevronLeft-C3Qxla_q.js";import{u as F}from"./use-form-BmKDidqr.js";import{T as W}from"./TextInput-C_mclD3l.js";import{N as q}from"./NumberInput-Dj--Uqkj.js";import{T as K}from"./Textarea-CKjVOl78.js";import{B as L}from"./Badge-BmcT5mAf.js";import"./IconCalendar-CY0wv-Qm.js";import"./MonthPicker-CoC0Kwom.js";import"./use-dates-state-BgkaIGkW.js";import"./InputBase-BWEPP0b6.js";import"./Input-Dm5-gGl7.js";/**
 * @license @tabler/icons-react v3.34.0 - MIT
 *
 * This source code is licensed under the MIT license.
 * See the LICENSE file in the root directory of this source tree.
 */var b=w("outline","coins","IconCoins",[["path",{d:"M9 14c0 1.657 2.686 3 6 3s6 -1.343 6 -3s-2.686 -3 -6 -3s-6 1.343 -6 3z",key:"svg-0"}],["path",{d:"M9 14v4c0 1.656 2.686 3 6 3s6 -1.344 6 -3v-4",key:"svg-1"}],["path",{d:"M3 6c0 1.072 1.144 2.062 3 2.598s4.144 .536 6 0c1.856 -.536 3 -1.526 3 -2.598c0 -1.072 -1.144 -2.062 -3 -2.598s-4.144 -.536 -6 0c-1.856 .536 -3 1.526 -3 2.598z",key:"svg-2"}],["path",{d:"M3 6v10c0 .888 .772 1.45 2 2",key:"svg-3"}],["path",{d:"M3 11c0 .888 .772 1.45 2 2",key:"svg-4"}]]);const _="https://dianlucky.my.id/api",$=async s=>(console.log("Data yang dikirim : ",s),(await k.post(`${_}/cash-advances/`,s,{headers:{Authorization:`Bearer ${C.getToken()}`}})).data),G=()=>z({mutationFn:$,onMutate:async()=>{},onError:s=>{console.log("Error :",s)}}),J=({cashAdvances:s,refetchCashAdvances:i})=>{const[a,{open:u,close:o}]=M(!1),t=h(),[l,r]=j.useState(),N=S(),y=async c=>{N.mutateAsync(c,{onSuccess:v=>{console.log("Success Delete:",v),i(),o()}})};return e.jsxs("section",{className:"bg-white shadow-md rounded-lg p-3",children:[e.jsxs("div",{className:"flex justify-between py-2 px-4",children:[e.jsx("div",{children:e.jsx(n,{size:"md",fw:"bold",children:"Catatan kasbon"})}),e.jsx("div",{children:e.jsx(b,{})})]}),e.jsx("div",{className:"px-3",children:e.jsx(p,{size:"md"})}),e.jsxs("div",{children:[s.length!=0&&s.map((c,v)=>e.jsxs("div",{className:"px-3 py-2",children:[e.jsxs("div",{className:"grid grid-cols-12 mb-3",children:[e.jsxs("div",{className:"col-span-2 text-center -mb-2",children:[e.jsx(n,{fw:"bold",size:"25px",ml:2,children:m(c.created_at,"dd",{locale:x})}),e.jsx(n,{size:"sm",mt:-4,children:m(c.created_at,"MMM",{locale:x})})]}),e.jsx("div",{className:"col-span-1",children:e.jsx("div",{className:"w-px h-full bg-gray-300 mx-4"})}),e.jsx("div",{className:"col-span-6 m-auto",children:e.jsxs(n,{fw:"bold",size:"xl",children:["Rp. ",new Intl.NumberFormat("id-ID").format(c.amount)]})}),e.jsxs("div",{className:"col-span-3 my-auto relative",children:[e.jsx("div",{className:"absolute -top-6 -right-0"}),e.jsxs("div",{className:"ml-2 flex gap-1",children:[e.jsx(d,{size:"compact-sm",disabled:c.status!=="pending",color:"red",onClick:()=>{u(),r(c)},children:e.jsx(B,{size:20})}),e.jsx(d,{size:"compact-sm",color:"blue",onClick:()=>t("/cash-advance-request/detail",{state:c}),children:e.jsx(T,{size:20})})]})]})]}),e.jsx(p,{})]},v)),s.length==0&&e.jsxs("div",{className:"mt-2 px-3 py-2",children:[e.jsx("div",{className:"flex justify-center",children:e.jsx(A,{src:"/images/not-found.svg",style:{width:"120px"}})}),e.jsx("div",{className:"flex justify-center",children:e.jsx(n,{fw:700,size:"md",children:"Ups!"})}),e.jsx("div",{className:"flex justify-center -mt-1",children:e.jsx(n,{fw:700,size:"sm",children:"Kasbon kosong"})})]}),e.jsx(I,{opened:a,onClose:o,withCloseButton:!1,children:e.jsxs("div",{className:"mt-2",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(n,{fw:"bold",children:"Apakah anda yakin ingin menghapus data?"}),e.jsxs(n,{fw:"bold",size:"md",c:"red",children:['"'," ",l&&m(l==null?void 0:l.date,"dd MMM yyyy",{locale:x})," ","| Rp."," ",l&&new Intl.NumberFormat("id-ID").format(l.amount),'"']})]}),e.jsxs("div",{className:"flex justify-between gap-3 mt-3 px-3",children:[e.jsx(d,{size:"sm",fullWidth:!0,onClick:o,color:"grey",children:"Kembali"}),e.jsx(d,{size:"sm",fullWidth:!0,onClick:()=>{o(),y(l==null?void 0:l.id)},color:"red",children:"Ya! Hapus"})]})]})}),e.jsx("div",{className:"px-2 mt-1 mb-2",children:e.jsx(d,{size:"sm",fullWidth:!0,onClick:()=>{t("/cash-advance-request/add")},children:"Ajukan kasbon"})})]})]})},O=()=>{const{creds:s}=f(),i=h(),a=F({validateInputOnChange:!0,initialValues:{date:new Date,reason:"",amount:0},validate:{date:t=>t instanceof Date&&!isNaN(t.getTime())?null:"Tanggal tidak valid",amount:t=>t<1e4?"Jumalah kasbon tidak valid":null,reason:t=>t.length<5?"Minimal 5 karakter":null}}),u=G(),o=async t=>{if(t.preventDefault(),!a.isValid())return;const l={amount:a.values.amount,date:a.values.date,reason:a.values.reason,employee_id:s==null?void 0:s.employee_id};await u.mutateAsync(l,{onSuccess:r=>{console.log("Success:",r),a.reset(),i(-1),D({message:"Berhasil menambah pengajuan kasbon",color:"green",position:"top-center"}),close()}})};return e.jsxs("div",{className:"mt-2 p-4",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("div",{children:e.jsx(n,{fw:"bold",size:"md",c:"#222222",children:"Ajukan kasbon"})}),e.jsx("div",{children:e.jsx(b,{color:"#222222"})})]}),e.jsx(p,{}),e.jsx("div",{className:"px-3",children:e.jsxs("form",{onSubmit:o,children:[e.jsx("div",{className:"mt-2",children:e.jsx(W,{label:"Tanggal",placeholder:`${m(new Date,"EEEE, dd MMMM yyyy",{locale:x})}`,size:"md",disabled:!0,...a.getInputProps("date")},a.key("date"))}),e.jsx("div",{className:"mt-2",children:e.jsx(q,{label:"Jumlah",leftSection:"Rp.",size:"sm",allowDecimal:!1,decimalSeparator:",",thousandSeparator:".",hideControls:!0,...a.getInputProps("amount")},a.key("amount"))}),e.jsx("div",{className:"mt-2",children:e.jsx(K,{label:"Alasan",placeholder:"alasan pengajuan kasbon",size:"md",...a.getInputProps("reason")},a.key("reason"))}),e.jsxs("div",{className:"flex justify-between gap-2 mt-4 mb-5",children:[e.jsx(d,{size:"sm",onClick:()=>{i("/cash-advance-request")},fullWidth:!0,color:"gray",children:"Kembali"}),e.jsx(d,{type:"submit",fullWidth:!0,children:"Ajukan"})]})]})})]})},U=({cashAdvance:s})=>{const{creds:i}=f(),a=h();return e.jsxs("div",{className:"mt-2 p-4",children:[e.jsxs("div",{className:"flex justify-between mb-1 px-1",children:[e.jsx("div",{children:e.jsx(n,{fw:"bold",size:"md",c:"#222222",children:"Detail kasbon"})}),e.jsx("div",{children:e.jsx(L,{color:s.status=="accepted"?"green":s.status=="pending"?"grey":"red",size:"xs",radius:"xs",children:s.status})})]}),e.jsx(p,{size:"md"}),e.jsxs("div",{className:"grid grid-cols-12 px-2 mt-2",children:[(i==null?void 0:i.level)=="Owner"&&e.jsxs("div",{className:"col-span-12",children:[e.jsx(n,{fw:500,size:"sm",children:"Nama pegawai :"}),e.jsx(n,{fw:700,size:"md",mt:-4,children:s.employee.name})]}),e.jsxs("div",{className:"col-span-12",children:[e.jsx(n,{fw:500,size:"sm",children:"Tanggal kasbon:"}),e.jsx(n,{fw:700,size:"md",mt:-4,children:s&&m(s.date,"EEEE, dd MMMM yyyy",{locale:x})})]}),e.jsxs("div",{className:"col-span-12 mt-2",children:[e.jsx(n,{fw:500,size:"sm",children:"Jumlah kasbon:"}),e.jsxs(n,{fw:700,size:"md",mt:-4,children:["Rp. ",new Intl.NumberFormat("id-ID").format(s.amount)]})]}),e.jsxs("div",{className:"col-span-12 mt-2",children:[e.jsx(n,{fw:500,size:"sm",children:"Alasan kasbon:"}),e.jsx(n,{fw:700,size:"md",mt:-4,children:s.reason})]})]}),e.jsx(p,{size:"md",mt:4}),e.jsx("div",{className:"col-span-12 mt-2",children:e.jsx(d,{size:"sm",onClick:()=>{a(-1)},fullWidth:!0,color:"grey",children:"Kembali"})})]})},me=()=>{const{creds:s}=f(),i=h(),[a,u]=j.useState(m(new Date,"yyyy-MM",{locale:x})),[o,t]=j.useState([]),{data:l,refetch:r}=P(a,s==null?void 0:s.employee_id);return j.useEffect(()=>{l&&t(l)},[l]),j.useEffect(()=>{r()},[a]),console.log("Month :",a),console.log("Kasbon :",o),e.jsxs("main",{children:[e.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),e.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10",children:e.jsxs("div",{className:"flex justify-between",children:[e.jsx("div",{children:e.jsx(g,{onClick:()=>{i(-1)},size:21,className:"font-bold rounded-md"})}),e.jsx("div",{className:"font-semibold text-brown",children:e.jsx("h2",{className:"font-semibold",children:"Pengajuan kasbon"})}),e.jsx("div",{})]})}),e.jsx("div",{className:"mt-2 mx-6",children:e.jsx(R,{setSelectedMonth:u})}),e.jsx("div",{className:"mt-2 mx-6 mb-20",children:e.jsx(J,{cashAdvances:o,refetchCashAdvances:r})})]})},xe=()=>{const s=h();return e.jsxs("main",{children:[e.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),e.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10 mb-2",children:e.jsxs("div",{className:"grid grid-cols-12 mb-1",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(g,{onClick:()=>{s(-1)},size:21,className:"font-bold rounded-md"})}),e.jsx("div",{className:"col-span-11 text-center -ml-4 font-semibold text-brown",children:e.jsx("h2",{className:"font-semibold",children:"Ajukan kasbon"})})]})}),e.jsx("section",{className:"bg-white shadow-md rounded-lg mt-2 mx-5",children:e.jsx(O,{})})]})},he=()=>{const s=h(),a=E().state;return e.jsxs("main",{children:[e.jsx("section",{className:"w-full h-20 bg-brown rounded-b-3xl"}),e.jsx("section",{className:"bg-white mx-5 p-3 shadow-md rounded-lg flex flex-col gap-2 -mt-10 mb-2",children:e.jsxs("div",{className:"grid grid-cols-12 mb-1",children:[e.jsx("div",{className:"col-span-1",children:e.jsx(g,{onClick:()=>{s(-1)},size:21,className:"font-bold rounded-md"})}),e.jsx("div",{className:"col-span-11 text-center -ml-4 font-semibold text-brown",children:e.jsx("h2",{className:"font-semibold",children:"Detail kasbon"})})]})}),e.jsx("section",{className:"bg-white shadow-md rounded-lg mt-2 mx-5",children:e.jsx(U,{cashAdvance:a})})]})};export{J as CashAdvanceList,me as CashAdvancePage,xe as CreateCashAdvanceRequestPage,he as DetailCashAdvancePage,U as DetailCashAdvanceSection,O as FormAddCashAdvance,R as MonthPickerSection,$ as createCashAdvance,pe as getAllCashAdvance,ve as getCashAdvanceByEmployeeId,fe as getCashAdvanceByMonthEmployeeId,G as useCreateCashAdvance,S as useDeleteCashAdvance,ge as useGetAllCashAdvance,be as useGetCashAdvanceByEmployeeId,P as useGetCashAdvanceByMonthEmployeeId};
