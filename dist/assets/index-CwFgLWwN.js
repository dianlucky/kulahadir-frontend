import{r as m,j as s,c as b,T as r,B as j,P as p,m as M,D as h,i as w,aj as W,I as S,$ as T,d as G,e as J,s as K,C as E,A as Q}from"./index-BOpnoju3.js";import{T as n}from"./Table-CpIaesso.js";import{B as k}from"./Badge-CZtOxQol.js";import{I as B}from"./IconPencil-BOzlkK1K.js";import{I as F}from"./IconTrash-CpPEZGeA.js";import{I}from"./IconAdjustments-BcG3o7dT.js";import{S as L}from"./Select-ia85iBhX.js";import{M as U}from"./MonthPickerInput-pVKo6SXR.js";import{u as V}from"./updateLeaveRequest-Bqnaf8L4.js";import{u as X}from"./updateCashAdvance-aMvO-KZP.js";import{u as Z}from"./deleteCashAdvance-Bs5GOhnB.js";import{u as C}from"./getLeave-t9SWBMNw.js";import{g as Fs}from"./getLeave-t9SWBMNw.js";import{a as A}from"./getCashAdvance-Cp4fTHVB.js";import"./Input-CZsZP0m2.js";import"./CheckIcon-CqsmvZQ3.js";import"./InputBase-b1LtnY3Z.js";import"./use-dates-state-CvLU8EGr.js";import"./use-dates-input-D4LFkkFA.js";import"./MonthPicker-U_G5LzZU.js";const R=({setDelete:i,setEdit:e,request:l,setSelectedRequest:d})=>{const[c,x]=m.useState("pending"),[t,f]=m.useState(new Date),[u,N]=m.useState(!1),g=l==null?void 0:l.sort((a,o)=>a.status==="pending"&&o.status!=="pending"?-1:a.status!=="pending"&&o.status==="pending"?1:new Date(o.created_at).getTime()-new Date(a.created_at).getTime()).filter(a=>a.status===c&&new Date(a.date).getMonth()===(t==null?void 0:t.getMonth())&&new Date(a.date).getFullYear()===(t==null?void 0:t.getFullYear())).map((a,o)=>s.jsxs(n.Tr,{children:[s.jsx(n.Td,{children:o+1}),s.jsx(n.Td,{children:a.employee.name}),s.jsxs(n.Td,{children:[" ",b(new Date(a.date),"EEEE, dd MMMM yyyy",{locale:w})," "]}),s.jsx(n.Td,{children:s.jsx(r,{truncate:"end",children:a.type})}),s.jsx(n.Td,{children:s.jsx(k,{radius:"sm",color:a.status=="pending"?"grey":a.status=="accepted"?"green":"red",children:a.status})}),s.jsx(n.Td,{className:"w-40 ",children:s.jsxs("div",{className:"flex gap-1 justify-center",children:[s.jsx(j,{size:"compact-md",color:"yellow",onClick:()=>{e(!0),i(!1),d(a)},children:s.jsx(B,{})}),s.jsx(j,{size:"compact-md",color:"red",onClick:()=>{i(!0),e(!1),d(a)},children:s.jsx(F,{})})]})})]},o));return s.jsx(s.Fragment,{children:s.jsxs("section",{children:[s.jsxs(p,{width:250,position:"bottom",withArrow:!0,shadow:"md",opened:u,closeOnClickOutside:!0,children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{children:s.jsx("div",{className:"text-dark font-semibold cursor-pointer text-lg",children:"Daftar pengajuan izin / sakit"})}),s.jsx(p.Target,{children:s.jsx(M,{inline:!0,color:"red",size:10,offset:2,children:s.jsx(j,{size:"xs",onClick:()=>N(a=>!a),children:s.jsx(I,{color:"white"})})})})]}),s.jsx(p.Dropdown,{children:s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx(r,{size:"sm",fw:"bolder",children:"Filter"}),s.jsx(h,{className:"mb-2"}),s.jsx(L,{label:"status",size:"xs",value:c,allowDeselect:!1,onChange:x,data:[{label:"pending",value:"pending"},{label:"accepted",value:"accepted"},{label:"rejected",value:"rejected"}]}),s.jsx(U,{label:"bulan",size:"xs",value:t,allowDeselect:!1,onChange:f})]}),s.jsx(h,{})]})})]}),s.jsx("div",{className:"mt-3",children:s.jsxs(n,{striped:!0,highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,className:"text-dark font-semibold cursor-pointer text-sm",children:[s.jsx(n.Thead,{children:s.jsxs(n.Tr,{children:[s.jsx(n.Th,{className:"font-semibold",children:"No"}),s.jsx(n.Th,{className:"font-semibold",children:"Nama"}),s.jsx(n.Th,{className:"font-semibold",children:"Tanggal pengajuan"}),s.jsx(n.Th,{className:"font-semibold",children:"Tipe"}),s.jsx(n.Th,{className:"font-semibold",children:"Status"}),s.jsx(n.Th,{className:"font-semibold flex justify-center",children:"Aksi"})]})}),s.jsx(n.Tbody,{children:l&&l.length>0?g:s.jsx(n.Tr,{children:s.jsx(n.Td,{colSpan:6,className:"text-center",children:"Data tidak ditemukan"})})})]})})]})})},q="https://dianlucky.my.id/api",y=({employee:i})=>s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("div",{className:"text-dark font-semibold cursor-pointer text-md",children:"Detail pegawai"}),s.jsx("div",{children:s.jsx(W,{})})]}),s.jsx(h,{}),s.jsxs("div",{className:"mt-4 ",children:[s.jsxs("div",{className:"grid grid-cols-12  px-4",children:[s.jsx("div",{className:"col-span-4 flex justify-center -ml-5",children:s.jsx(S,{radius:"200",src:i!=null&&i.profile_pic?`${q}/uploads/employees/${i==null?void 0:i.profile_pic}`:"/images/profile-default.png",style:{width:"50px",height:"50px",objectFit:"cover"}})}),s.jsxs("div",{className:"col-span-8",children:[s.jsx("div",{className:"mt-2",children:s.jsx(r,{fw:"bold",size:"md",truncate:"end",children:i==null?void 0:i.name})}),s.jsx("div",{className:"-mt-2",children:s.jsx(r,{size:"sm",children:i==null?void 0:i.account.status})})]})]}),s.jsxs("div",{className:"grid grid-cols-12 mt-2 ml-4 gap-2",children:[s.jsx("div",{className:"col-span-6",children:s.jsxs("div",{className:"mt-2",children:[s.jsx(r,{size:"sm",children:"Username:"}),s.jsx(r,{fw:"bold",size:"md",mt:-5,children:i==null?void 0:i.account.username})]})}),s.jsx("div",{className:"col-span-6",children:s.jsxs("div",{className:"mt-2",children:[s.jsx(r,{size:"sm",children:"Role:"}),s.jsx(r,{fw:"bold",size:"md",mt:-5,children:i==null?void 0:i.account.level})]})}),s.jsx("div",{className:"col-span-6",children:s.jsxs("div",{className:"mt-2",children:[s.jsx(r,{size:"sm",children:"No Whatsapp:"}),s.jsx(r,{fw:"bold",size:"md",mt:-5,truncate:"end",children:i==null?void 0:i.phone})]})}),s.jsx("div",{className:"col-span-6",children:s.jsxs("div",{className:"mt-2",children:[s.jsx(r,{size:"sm",children:"Tanggal lahir:"}),s.jsx(r,{fw:"bold",size:"md",mt:-5,children:i!=null&&i.birth_date?b(new Date(i==null?void 0:i.birth_date)," dd MMMM yyyy",{locale:w}):""})]})})]})]})]}),ss="https://dianlucky.my.id/api",is="/images/spash.png",as=({selectedRequest:i,RefetchRequest:e})=>{const l=V(i==null?void 0:i.id),d=async c=>{const x={status:c};await l.mutateAsync(x,{onSuccess:t=>{console.log("Success:",t),T({message:"Berhasil mengubah status pengajuan",color:"green",position:"bottom-right"}),e(),close()}})};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsxs("div",{className:"text-dark font-semibold cursor-pointer text-md",children:["Pengajuan ",i==null?void 0:i.type]}),s.jsx("div",{className:"-mt-1",children:s.jsx(k,{radius:"xs",color:(i==null?void 0:i.status)=="pending"?"grey":(i==null?void 0:i.status)=="accepted"?"green":"red",children:i==null?void 0:i.status})})]}),s.jsx(h,{}),s.jsx("div",{className:"mt-2",children:s.jsxs("div",{className:"grid grid-cols-12 mt-2 ml-4",children:[s.jsx("div",{className:"col-span-12",children:s.jsxs("div",{className:"mt-2",children:[s.jsx(r,{fw:"bold",size:"sm",children:"Hari & Tanggal:"}),s.jsx(r,{size:"sm",mt:-5,children:i!=null&&i.date?b(new Date(i==null?void 0:i.date),"EEEE, dd MMMM yyyy",{locale:w}):""})]})}),s.jsx("div",{className:"col-span-12",children:s.jsxs("div",{className:"mt-2",children:[s.jsx(r,{fw:"bold",size:"sm",children:"Hari & Tanggal:"}),s.jsx(S,{radius:"md",h:200,style:{justifyContent:"center",padding:"10",width:"90% "},fit:"contain",src:i!=null&&i.attachment?`${ss}/uploads/attachments/${i.attachment}`:is})]})}),s.jsx("div",{className:"col-span-12",children:s.jsxs("div",{className:"mt-2",children:[s.jsx(r,{fw:"bold",size:"sm",children:"Alasan:"}),s.jsx(r,{size:"sm",mt:-5,children:i==null?void 0:i.reason})]})}),(i==null?void 0:i.status)=="pending"&&s.jsx("div",{className:"col-span-12 mt-3",children:s.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[s.jsx("div",{className:"col-span-6",children:s.jsx(j,{color:"red",fullWidth:!0,onClick:()=>d("rejected"),children:"Tolak"})}),s.jsx("div",{className:"col-span-6",children:s.jsx(j,{color:"blue",fullWidth:!0,onClick:()=>d("accepted"),children:"Terima"})})]})})]})})]})},ns="https://dianlucky.my.id/api",rs=async i=>(await J.delete(`${ns}/leaves/${i}`,{headers:{Authorization:`Bearer ${K.getToken()}`}})).data,es=()=>G({mutationFn:i=>rs(i),onError:i=>{console.log(i)}}),ts=({setDelete:i,selectedRequest:e,RefetchRequest:l})=>{const d=es(),c=async x=>{d.mutateAsync(x,{onSuccess:t=>{console.log("Success Delete:",t),i(!1),T({message:"Berhasil menghapus pengajuan pegawai",color:"green",position:"bottom-right"}),l(),close()}})};return s.jsx("section",{className:"col-span-4 bg-white shadow-lg p-6 rounded-lg mt-2",children:s.jsxs("div",{children:[s.jsxs("div",{className:"grid grid-cols-12",children:[s.jsx("div",{className:"col-span-10 text-dark font-semibold cursor-pointer text-lg mb-2",children:"Hapus data pengajuan"}),s.jsx("div",{className:"col-span-1"}),s.jsx("div",{className:"col-span-1",children:s.jsx(E,{onClick:()=>i(!1)})})]}),s.jsx(h,{}),s.jsxs("div",{className:"mt-4 text-center",children:[s.jsx(r,{size:"md",fw:500,children:"Apakah anda yakin ingin menghapus data pengajuan dari pegawai ?"}),s.jsxs(r,{size:"md",c:"red",fw:600,children:['"',e==null?void 0:e.employee.name,'"']})]}),s.jsx("div",{className:"flex justify-center mt-2",children:s.jsx(j,{onClick:()=>c(e==null?void 0:e.id),type:"submit",color:"red",children:"Ya!"})})]})})},ls=({deleteCashAdvance:i,editCashAdvance:e,cashAdvances:l,setSelectedCashAdvance:d})=>{const[c,x]=m.useState("pending"),[t,f]=m.useState(new Date),[u,N]=m.useState(!1),g=l==null?void 0:l.sort((a,o)=>a.status==="pending"&&o.status!=="pending"?-1:a.status!=="pending"&&o.status==="pending"?1:new Date(o.created_at).getTime()-new Date(a.created_at).getTime()).filter(a=>a.status===c&&new Date(a.date).getMonth()===(t==null?void 0:t.getMonth())&&new Date(a.date).getFullYear()===(t==null?void 0:t.getFullYear())).map((a,o)=>s.jsxs(n.Tr,{children:[s.jsx(n.Td,{children:o+1}),s.jsx(n.Td,{children:a.employee.name}),s.jsxs(n.Td,{children:[" ",b(new Date(a.date),"EEEE, dd MMMM yyyy",{locale:w})," "]}),s.jsx(n.Td,{children:s.jsx(k,{radius:"sm",color:a.status=="pending"?"grey":a.status=="accepted"?"green":"red",children:a.status})}),s.jsx(n.Td,{className:"w-40 ",children:s.jsxs("div",{className:"flex gap-1 justify-center",children:[s.jsx(j,{size:"compact-md",color:"yellow",onClick:()=>{e(!0),i(!1),d(a)},children:s.jsx(B,{})}),s.jsx(j,{size:"compact-md",color:"red",onClick:()=>{e(!1),i(!0),d(a)},children:s.jsx(F,{})})]})})]},o));return s.jsx(s.Fragment,{children:s.jsxs("section",{children:[s.jsxs(p,{width:250,position:"bottom",withArrow:!0,shadow:"md",opened:u,closeOnClickOutside:!0,children:[s.jsxs("div",{className:"flex justify-between items-center",children:[s.jsx("div",{children:s.jsx("div",{className:"text-dark font-semibold cursor-pointer text-lg",children:"Daftar pengajuan kasbon"})}),s.jsx(p.Target,{children:s.jsx(M,{inline:!0,color:"red",size:10,offset:2,children:s.jsx(j,{size:"xs",onClick:()=>N(a=>!a),children:s.jsx(I,{color:"white"})})})})]}),s.jsx(p.Dropdown,{children:s.jsxs("div",{className:"mt-2",children:[s.jsxs("div",{className:"mb-3",children:[s.jsx(r,{size:"sm",fw:"bolder",children:"Filter"}),s.jsx(h,{className:"mb-2"}),s.jsx(L,{label:"status",size:"xs",value:c,allowDeselect:!1,onChange:x,data:[{label:"pending",value:"pending"},{label:"accepted",value:"accepted"},{label:"rejected",value:"rejected"}]}),s.jsx(U,{label:"bulan",size:"xs",value:t,allowDeselect:!1,onChange:f})]}),s.jsx(h,{})]})})]}),s.jsx("div",{className:"mt-3",children:s.jsxs(n,{striped:!0,highlightOnHover:!0,withTableBorder:!0,withColumnBorders:!0,className:"text-dark font-semibold cursor-pointer text-sm",children:[s.jsx(n.Thead,{children:s.jsxs(n.Tr,{children:[s.jsx(n.Th,{className:"font-semibold",children:"No"}),s.jsx(n.Th,{className:"font-semibold",children:"Nama"}),s.jsx(n.Th,{className:"font-semibold",children:"Tanggal pengajuan"}),s.jsx(n.Th,{className:"font-semibold",children:"Status"}),s.jsx(n.Th,{className:"font-semibold flex justify-center",children:"Aksi"})]})}),l?s.jsx(n.Tbody,{children:g}):s.jsx(n.Tbody,{children:s.jsx(n.Tr,{children:s.jsx(n.Td,{colSpan:5,className:"text-center",children:"Data tidak ditemukan"})})})]})})]})})},cs=({selectedCashAdvance:i,RefetchCashAdvance:e})=>{const l=X(i==null?void 0:i.id),d=async c=>{const x={status:c};await l.mutateAsync(x,{onSuccess:t=>{console.log("Success:",t),T({message:"Berhasil mengubah status pengajuan",color:"green",position:"bottom-right"}),e(),close()}})};return s.jsxs("div",{children:[s.jsxs("div",{className:"flex justify-between mb-2",children:[s.jsx("div",{className:"text-dark font-semibold cursor-pointer text-md",children:"Pengajuan kasbon"}),s.jsx("div",{className:"-mt-1",children:s.jsx(k,{radius:"xs",color:(i==null?void 0:i.status)=="pending"?"grey":(i==null?void 0:i.status)=="accepted"?"green":"red",children:i==null?void 0:i.status})})]}),s.jsx(h,{}),s.jsx("div",{className:"mt-2",children:s.jsxs("div",{className:"grid grid-cols-12 mt-2 ml-4",children:[s.jsx("div",{className:"col-span-12",children:s.jsxs("div",{className:"mt-2",children:[s.jsx(r,{fw:"bold",size:"sm",children:"Hari & Tanggal:"}),s.jsx(r,{size:"sm",mt:-5,children:i!=null&&i.date?b(new Date(i==null?void 0:i.date),"EEEE, dd MMMM yyyy",{locale:w}):""})]})}),s.jsx("div",{className:"col-span-12",children:s.jsxs("div",{className:"mt-2",children:[s.jsx(r,{fw:"bold",size:"sm",children:"Jumlah kasbon:"}),s.jsxs(r,{size:"sm",mt:-5,children:["Rp."," ",(i==null?void 0:i.amount)&&new Intl.NumberFormat("id-ID").format(i.amount)]})]})}),s.jsx("div",{className:"col-span-12",children:s.jsxs("div",{className:"mt-2",children:[s.jsx(r,{fw:"bold",size:"sm",children:"Alasan:"}),s.jsx(r,{size:"sm",mt:-5,children:i==null?void 0:i.reason})]})}),s.jsx("div",{className:"col-span-12 mt-3",children:s.jsxs("div",{className:"grid grid-cols-12 gap-2",children:[s.jsx("div",{className:"col-span-6",children:s.jsx(j,{color:"red",fullWidth:!0,onClick:()=>d("rejected"),children:"Tolak"})}),s.jsx("div",{className:"col-span-6",children:s.jsx(j,{color:"blue",fullWidth:!0,onClick:()=>d("accepted"),children:"Terima"})})]})})]})})]})},ds=({deleteCashAdvance:i,selectedCashAdvance:e,RefetchCashAdvance:l})=>{const d=Z(),c=async x=>{d.mutateAsync(x,{onSuccess:t=>{console.log("Success Delete:",t),i(!1),T({message:"Berhasil menghapus pengajuan kasbon pegawai",color:"green",position:"bottom-right"}),l(),close()}})};return s.jsx("section",{className:"col-span-4 bg-white shadow-lg p-6 rounded-lg mt-2",children:s.jsxs("div",{children:[s.jsxs("div",{className:"grid grid-cols-12",children:[s.jsx("div",{className:"col-span-10 text-dark font-semibold cursor-pointer text-lg mb-2",children:"Hapus pengajuan kasbon"}),s.jsx("div",{className:"col-span-1"}),s.jsx("div",{className:"col-span-1",children:s.jsx(E,{onClick:()=>i(!1)})})]}),s.jsx(h,{}),s.jsxs("div",{className:"mt-4 text-center",children:[s.jsx(r,{size:"md",fw:500,children:"Apakah anda yakin ingin menghapus pengajuan kasbon dari pegawai ?"}),s.jsxs(r,{size:"md",c:"red",fw:600,children:['"',e==null?void 0:e.employee.name,'"']})]}),s.jsx("div",{className:"flex justify-center mt-2",children:s.jsx(j,{onClick:()=>c(e==null?void 0:e.id),type:"submit",color:"red",children:"Ya!"})})]})})},Ss=()=>{const[i,e]=m.useState(!1),[l,d]=m.useState(!1),[c,x]=m.useState(),[t,f]=m.useState(),{data:u,isLoading:N,refetch:g}=C();m.useEffect(()=>{u&&f(u)},[u]);const[a,o]=m.useState(!1),[$,_]=m.useState(!1),[v,O]=m.useState(),[P,H]=m.useState(),{data:D,isLoading:Y,refetch:z}=A();return m.useEffect(()=>{D&&H(D)},[D]),N&&Y?s.jsx("div",{className:"flex justify-center",children:s.jsx(Q,{color:"orange",size:"lg",type:"dots"})}):s.jsx("section",{children:s.jsxs("div",{className:"bg-white shadow-lg p-6 rounded-lg",children:[s.jsx("div",{className:"flex justify-center mb-4",children:s.jsx(r,{fw:"bolder",size:"lg",c:"#343a40",children:"Data Pengajuan"})}),s.jsx(h,{}),s.jsxs("div",{className:"grid grid-cols-12 gap-2 mt-4",children:[s.jsxs("div",{className:"col-span-9",children:[s.jsx("div",{className:"bg-white shadow-sm p-6 rounded-lg",children:s.jsx(R,{request:t,setDelete:e,setEdit:d,setSelectedRequest:x})}),s.jsx("div",{className:"bg-white shadow-sm p-6 rounded-lg mt-6",children:s.jsx(ls,{cashAdvances:P,deleteCashAdvance:o,editCashAdvance:_,setSelectedCashAdvance:O})})]}),s.jsxs("div",{className:"col-span-3",children:[l&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white shadow-sm p-6 rounded-lg",children:s.jsx(y,{employee:c==null?void 0:c.employee})}),s.jsx("div",{className:"bg-white shadow-sm p-6 rounded-lg mt-2",children:s.jsx(as,{selectedRequest:c,RefetchRequest:g})})]}),i&&s.jsx(s.Fragment,{children:s.jsx(ts,{setDelete:e,selectedRequest:c,RefetchRequest:g})}),$&&s.jsxs(s.Fragment,{children:[s.jsx("div",{className:"bg-white shadow-sm p-6 rounded-lg",children:v&&s.jsx(y,{employee:v.employee})}),s.jsx("div",{className:"bg-white shadow-sm p-6 rounded-lg mt-2",children:s.jsx(cs,{selectedCashAdvance:v,RefetchCashAdvance:z})})]}),a&&s.jsx(s.Fragment,{children:s.jsx(ds,{deleteCashAdvance:o,selectedCashAdvance:v,RefetchCashAdvance:z})})]})]})]})})};export{ds as CashAdvanceDelete,cs as CashAdvanceDetail,ls as CashAdvanceTable,ts as DeleteRequestAdmin,y as EmployeeDetailCard,as as RequestDetailAdmin,Ss as RequestPageAdmin,R as RequestTableAdmin,Fs as getAllLeave,es as useDeleteRequest,C as useGetAllLeave};
